{"ast":null,"code":"import{create}from'zustand';import{persist}from'zustand/middleware';const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:3001/api';export const useAuthStore=create()(persist(set=>({isAuthenticated:false,user:null,login:async(username,password)=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});const data=await response.json();if(response.ok&&data.success&&data.user){set({isAuthenticated:true,user:data.user});return true;}return false;}catch(error){console.error('Login error:',error);return false;}},logout:()=>{set({isAuthenticated:false,user:null});}}),{name:'auth-storage',partialize:state=>({isAuthenticated:state.isAuthenticated,user:state.user})}));","map":{"version":3,"names":["create","persist","API_BASE_URL","process","env","REACT_APP_API_URL","useAuthStore","set","isAuthenticated","user","login","username","password","response","fetch","concat","method","headers","body","JSON","stringify","data","json","ok","success","error","console","logout","name","partialize","state"],"sources":["/Users/ubl/Desktop/PVARA-Frontend/src/store/auth.store.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\ninterface User {\n  username: string;\n  name: string;\n  role: 'admin' | 'evaluator' | 'reviewer';\n  email: string;\n}\n\ninterface AuthState {\n  isAuthenticated: boolean;\n  user: User | null;\n  login: (username: string, password: string) => Promise<boolean>;\n  logout: () => void;\n}\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n\nexport const useAuthStore = create<AuthState>()(\n  persist(\n    (set) => ({\n      isAuthenticated: false,\n      user: null,\n      \n      login: async (username: string, password: string) => {\n        try {\n          const response = await fetch(`${API_BASE_URL}/auth/login`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ username, password })\n          });\n\n          const data = await response.json();\n          \n          if (response.ok && data.success && data.user) {\n            set({ isAuthenticated: true, user: data.user });\n            return true;\n          }\n\n          return false;\n        } catch (error) {\n          console.error('Login error:', error);\n          return false;\n        }\n      },\n      \n      logout: () => {\n        set({ isAuthenticated: false, user: null });\n      }\n    }),\n    {\n      name: 'auth-storage',\n      partialize: (state) => ({ \n        isAuthenticated: state.isAuthenticated,\n        user: state.user \n      })\n    }\n  )\n);\n"],"mappings":"AAAA,OAASA,MAAM,KAAQ,SAAS,CAChC,OAASC,OAAO,KAAQ,oBAAoB,CAgB5C,KAAM,CAAAC,YAAY,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,2BAA2B,CAEjF,MAAO,MAAM,CAAAC,YAAY,CAAGN,MAAM,CAAY,CAAC,CAC7CC,OAAO,CACJM,GAAG,GAAM,CACRC,eAAe,CAAE,KAAK,CACtBC,IAAI,CAAE,IAAI,CAEVC,KAAK,CAAE,KAAAA,CAAOC,QAAgB,CAAEC,QAAgB,GAAK,CACnD,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIb,YAAY,gBAAe,CACzDc,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAET,QAAQ,CAAEC,QAAS,CAAC,CAC7C,CAAC,CAAC,CAEF,KAAM,CAAAS,IAAI,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAElC,GAAIT,QAAQ,CAACU,EAAE,EAAIF,IAAI,CAACG,OAAO,EAAIH,IAAI,CAACZ,IAAI,CAAE,CAC5CF,GAAG,CAAC,CAAEC,eAAe,CAAE,IAAI,CAAEC,IAAI,CAAEY,IAAI,CAACZ,IAAK,CAAC,CAAC,CAC/C,MAAO,KAAI,CACb,CAEA,MAAO,MAAK,CACd,CAAE,MAAOgB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACpC,MAAO,MAAK,CACd,CACF,CAAC,CAEDE,MAAM,CAAEA,CAAA,GAAM,CACZpB,GAAG,CAAC,CAAEC,eAAe,CAAE,KAAK,CAAEC,IAAI,CAAE,IAAK,CAAC,CAAC,CAC7C,CACF,CAAC,CAAC,CACF,CACEmB,IAAI,CAAE,cAAc,CACpBC,UAAU,CAAGC,KAAK,GAAM,CACtBtB,eAAe,CAAEsB,KAAK,CAACtB,eAAe,CACtCC,IAAI,CAAEqB,KAAK,CAACrB,IACd,CAAC,CACH,CACF,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}