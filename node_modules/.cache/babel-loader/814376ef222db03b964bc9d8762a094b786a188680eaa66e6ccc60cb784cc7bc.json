{"ast":null,"code":"import _objectSpread from\"/Users/ubl/Desktop/PVARA-Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo,useRef}from'react';import{FiFileText,FiUpload,FiChevronDown,FiChevronUp,FiFolder,FiFile,FiExternalLink,FiRefreshCw,FiClock,FiCheckCircle}from'react-icons/fi';import{applicationsApi}from'../services/applications.api';import'../styles/document-management.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// PVARA-specific document categories\nconst DOCUMENT_CATEGORIES={'pvara-regulations':{label:'PVARA Ordinance & Regulations',color:'#dc2626',icon:'üìú',description:'PVARA Act, NOC Regulations, AML Guidelines'},'noc-application-forms':{label:'NOC Application Forms',color:'#2563eb',icon:'üìã',description:'Form A1, A2, A3, A5 - Official application documents'},'applicant-corporate':{label:'Applicant Corporate Documents',color:'#7c3aed',icon:'üè¢',description:'Certificate of Incorporation, Board Resolutions, MOA'},'applicant-compliance':{label:'Applicant Compliance Policies',color:'#059669',icon:'‚úÖ',description:'AML/KYC/KYB Policies, Sanctions, MLRO Procedures'},'applicant-financial':{label:'Applicant Financial Documents',color:'#d97706',icon:'üí∞',description:'Financial Statements, Projections, Audit Reports'},'applicant-technical':{label:'Applicant Technical & Risk',color:'#0891b2',icon:'‚öôÔ∏è',description:'Technical Architecture, Risk Assessment, BCP'},'applicant-personnel':{label:'Key Personnel Documents',color:'#be185d',icon:'üë§',description:'Director Forms, MLRO, CFO Documentation'},'regulatory-responses':{label:'Regulatory Correspondence',color:'#4b5563',icon:'üì®',description:'SECP, SBP Comments and Responses'}};// Enhanced categorization for PVARA documents\nfunction categorizeDocument(filename){const lower=filename.toLowerCase();// PVARA Ordinance & Regulations\nif(lower.includes('ordinance')||lower.includes('pvara')||lower.includes('moit')||lower.includes('aml')&&lower.includes('.pdf')&&!lower.includes('policy')){return'pvara-regulations';}// Regulatory Responses (SECP, SBP)\nif(lower.includes('secp')||lower.includes('sbp')||lower.includes('comments on')){return'regulatory-responses';}// NOC Application Forms (Form A1, A2, A3, A5)\nif(lower.includes('form a1')||lower.includes('form a2')||lower.includes('form a5')||lower.includes('form_a')||lower.includes('application for no objection')||lower.includes('outsourcing declaration')){return'noc-application-forms';}// Key Personnel Documents (Form A3, individual docs)\nif(lower.includes('form a3')||lower.includes('a3 forms')||lower.includes('director')||lower.includes('cfo')||lower.includes('mlro')||lower.match(/chen ling|jimmy su|kaiser|richard teng|wilson|heidi|ryan|sunny|ying pok/)){return'applicant-personnel';}// Corporate Documents\nif(lower.includes('certificate')||lower.includes('apostille')||lower.includes('incorporation')||lower.includes('board_resolution')||lower.includes('moa')||lower.includes('rom')||lower.includes('robo')||lower.includes('notarial')||lower.includes('constitutive')){return'applicant-corporate';}// Compliance Policies\nif(lower.includes('aml')||lower.includes('kyc')||lower.includes('kyb')||lower.includes('compliance')||lower.includes('sanctions')||lower.includes('edd')||lower.includes('transaction monitoring')||lower.includes('record keeping')||lower.includes('training policy')){return'applicant-compliance';}// Financial Documents\nif(lower.includes('financial')||lower.includes('statement')){return'applicant-financial';}// Technical & Risk Documents\nif(lower.includes('technical')||lower.includes('outsourcing')||lower.includes('bcms')||lower.includes('continuity')||lower.includes('risk')||lower.includes('bcp')){return'applicant-technical';}return'noc-application-forms';// Default to application forms\n}// Build folder tree from document paths\nfunction buildDocumentTree(documents){const root={name:'Documents',path:'',isFolder:true,children:[]};documents.forEach(docPath=>{const parts=docPath.split('/');let current=root;parts.forEach((part,index)=>{const isLast=index===parts.length-1;const existing=current.children.find(c=>c.name===part);if(existing){current=existing;}else{const newNode={name:part,path:parts.slice(0,index+1).join('/'),isFolder:!isLast,children:[],category:isLast?categorizeDocument(part):undefined};current.children.push(newNode);current=newNode;}});});return root;}export const DocumentManagementPanel=_ref=>{var _DOCUMENT_CATEGORIES$,_documentHistory$sele,_documentHistory$sele2,_documentHistory$sele3;let{applicationId,documents:propDocuments,companyName}=_ref;const[expandedFolders,setExpandedFolders]=useState(new Set());const[showUploadForm,setShowUploadForm]=useState(false);const[realDocuments,setRealDocuments]=useState(propDocuments||[]);const[viewMode,setViewMode]=useState('category');const[selectedFile,setSelectedFile]=useState(null);const[showReplaceModal,setShowReplaceModal]=useState(false);const[documentHistory,setDocumentHistory]=useState({});const[docLibrary,setDocLibrary]=useState(null);const[loadingLibrary,setLoadingLibrary]=useState(false);const fileInputRef=useRef(null);// Log company name for debugging\nconsole.log('DocumentManagementPanel for:',companyName);// Fetch document library from API (OpenAI categorized documents)\nuseEffect(()=>{const fetchDocLibrary=async()=>{try{setLoadingLibrary(true);const response=await fetch('http://localhost:3001/api/applications/documents/library');const data=await response.json();if(data.success){setDocLibrary(data.documentLibrary);}}catch(err){console.error('Error fetching document library:',err);}finally{setLoadingLibrary(false);}};fetchDocLibrary();},[]);// Fetch documents from API if not provided\nuseEffect(()=>{if(!propDocuments){applicationsApi.getApplication(applicationId).then(result=>{if(result.success&&result.application.documents){setRealDocuments(result.application.documents);}}).catch(console.error);}},[applicationId,propDocuments]);// Initialize document history (mock data for demo)\nuseEffect(()=>{const history={};realDocuments.forEach(doc=>{history[doc]=[{version:1,filename:doc.split('/').pop()||doc,uploadedAt:new Date('2025-12-09'),uploadedBy:'Initial Submission'}];});setDocumentHistory(history);},[realDocuments]);// Build document tree\nconst documentTree=useMemo(()=>buildDocumentTree(realDocuments),[realDocuments]);// Group documents by category\nconst documentsByCategory=useMemo(()=>{const groups={};realDocuments.forEach(doc=>{const filename=doc.split('/').pop()||doc;const category=categorizeDocument(filename);if(!groups[category])groups[category]=[];groups[category].push(doc);});return groups;},[realDocuments]);const toggleFolder=path=>{setExpandedFolders(prev=>{const newSet=new Set(prev);if(newSet.has(path)){newSet.delete(path);}else{newSet.add(path);}return newSet;});};// Open document (simulated - in real app would open actual file)\nconst handleOpenDocument=docPath=>{// In production, this would call backend to serve the file\nconst filename=docPath.split('/').pop()||docPath;alert(\"Opening document: \".concat(filename,\"\\n\\nIn production, this would open the actual file from:\\napplications/\").concat(applicationId.includes('001')?'APP-001-HTX-Global':'APP-002-Binance',\"/documents/\").concat(docPath));};// Replace document\nconst handleReplaceDocument=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file||!selectedFile)return;// Track changes (in real app, would compare document contents)\nconst changes=['Document replaced with new version',\"New file: \".concat(file.name),\"Size: \".concat((file.size/1024).toFixed(1),\" KB\"),\"Uploaded: \".concat(new Date().toLocaleString())];// Update history\nconst currentHistory=documentHistory[selectedFile]||[];const newVersion={version:currentHistory.length+1,filename:file.name,uploadedAt:new Date(),uploadedBy:'Current User',changes};setDocumentHistory(prev=>_objectSpread(_objectSpread({},prev),{},{[selectedFile]:[...(prev[selectedFile]||[]),newVersion]}));setShowReplaceModal(false);alert(\"Document \\\"\".concat(selectedFile.split('/').pop(),\"\\\" replaced with \\\"\").concat(file.name,\"\\\"\\n\\nVersion \").concat(newVersion.version,\" created with change trail.\"));};const handleUploadDocument=e=>{var _e$target$files2;const file=(_e$target$files2=e.target.files)===null||_e$target$files2===void 0?void 0:_e$target$files2[0];if(!file)return;// In a real app, you'd upload to server and refresh the list\nconsole.log('Uploading file:',file.name);setShowUploadForm(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"document-management-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"doc-header card-glass\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold\",children:\"Document Repository\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-secondary\",children:[realDocuments.length,\" documents | AI-Categorized with OpenAI gpt-5.2\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'var(--space-sm)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"view-toggle\",style:{display:'flex',gap:'4px',background:'rgba(0,0,0,0.2)',borderRadius:'8px',padding:'4px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode('category'),className:\"btn btn-sm \".concat(viewMode==='category'?'btn-primary':''),style:{fontSize:'0.75rem',padding:'6px 12px'},children:\"By Category\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode('tree'),className:\"btn btn-sm \".concat(viewMode==='tree'?'btn-primary':''),style:{fontSize:'0.75rem',padding:'6px 12px'},children:\"By Folder\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowUploadForm(true),className:\"btn btn-primary btn-sm\",children:[/*#__PURE__*/_jsx(FiUpload,{size:14}),\" Upload\"]})]})]}),docLibrary&&companyName&&/*#__PURE__*/_jsxs(\"div\",{className:\"ai-categorized-docs card-glass\",style:{padding:'var(--space-md)',marginBottom:'var(--space-md)',borderLeft:'4px solid #8b5cf6',background:'rgba(139, 92, 246, 0.05)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'var(--space-md)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'0.95rem',fontWeight:'600',marginBottom:'0.5rem'},children:\"\\u2728 OpenAI Categorized Documents\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.8rem',color:'#999'},children:\"Documents analyzed and categorized by OpenAI gpt-5.2 (with full content analysis)\"})]}),loadingLibrary?/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.8rem',color:'#999'},children:\"Loading AI categories...\"}):docLibrary[companyName]?/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:'var(--space-sm)'},children:Object.entries(docLibrary[companyName]).map(_ref2=>{let[pvaraCategory,docs]=_ref2;const count=Array.isArray(docs)?docs.length:0;if(count===0)return null;const categoryLabels={'ordinance':'üìú Ordinance','regulations':'üìã Regulations','application-form':'üìù Application Forms','submitted-application':'‚úÖ Submitted Applications','supporting-document':'üìé Supporting Documents'};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'0.75rem',border:'1px solid rgba(255,255,255,0.1)',borderRadius:'6px',background:'rgba(0,0,0,0.2)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600',fontSize:'0.9rem',marginBottom:'0.5rem'},children:categoryLabels[pvaraCategory]||pvaraCategory}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.85rem',color:'#4ade80'},children:[count,\" document\",count!==1?'s':'']}),Array.isArray(docs)&&docs.slice(0,2).map((doc,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.75rem',color:'#999',marginTop:'0.25rem',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:[\"\\u2022 \",doc.name]},idx)),count>2&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.75rem',color:'#666',marginTop:'0.25rem'},children:[\"+ \",count-2,\" more\"]})]},pvaraCategory);})}):/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.8rem',color:'#999'},children:\"No AI categorized documents found for this applicant\"})]}),showUploadForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form card-glass\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleUploadDocument,className:\"text-sm\",accept:\".pdf,.docx,.xlsx,.jpg,.png\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowUploadForm(false),className:\"btn btn-secondary btn-sm\",children:\"Cancel\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"doc-content\",style:{display:'flex',gap:'var(--space-lg)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"doc-list-section\",style:{flex:1,minWidth:0},children:realDocuments.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state card-glass\",children:[/*#__PURE__*/_jsx(FiFileText,{size:24,opacity:0.3}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-secondary\",children:\"No documents found in application folder\"})]}):viewMode==='category'?/*#__PURE__*//* Category View */_jsx(\"div\",{className:\"documents-categories\",style:{display:'flex',flexDirection:'column',gap:'var(--space-md)'},children:Object.entries(DOCUMENT_CATEGORIES).map(_ref3=>{let[catKey,catInfo]=_ref3;const docs=documentsByCategory[catKey]||[];if(docs.length===0)return null;const isExpanded=expandedFolders.has(catKey);return/*#__PURE__*/_jsxs(\"div\",{className:\"category-section card-glass\",style:{padding:'var(--space-md)',borderLeft:\"4px solid \".concat(catInfo.color)},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"category-header\",onClick:()=>toggleFolder(catKey),style:{display:'flex',alignItems:'center',gap:'var(--space-sm)',cursor:'pointer',marginBottom:isExpanded?'var(--space-sm)':0},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'1.2rem'},children:catInfo.icon}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:600,flex:1,color:'var(--text-primary)'},children:catInfo.label}),/*#__PURE__*/_jsx(\"span\",{className:\"badge\",style:{background:catInfo.color,color:'white',fontSize:'0.7rem'},children:docs.length}),isExpanded?/*#__PURE__*/_jsx(FiChevronUp,{}):/*#__PURE__*/_jsx(FiChevronDown,{})]}),isExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"category-files\",style:{display:'flex',flexDirection:'column',gap:'6px',marginTop:'var(--space-sm)'},children:docs.map((docPath,idx)=>{var _fileName$split$pop;const fileName=docPath.split('/').pop()||docPath;const fileExt=((_fileName$split$pop=fileName.split('.').pop())===null||_fileName$split$pop===void 0?void 0:_fileName$split$pop.toLowerCase())||'';const isSelected=selectedFile===docPath;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setSelectedFile(docPath),className:\"file-item \".concat(isSelected?'selected':''),style:{display:'flex',alignItems:'center',gap:'var(--space-sm)',padding:'8px 12px',background:isSelected?'rgba(59, 130, 246, 0.2)':'rgba(255,255,255,0.05)',borderRadius:'6px',cursor:'pointer',transition:'all 0.2s ease',border:isSelected?'1px solid rgba(59, 130, 246, 0.5)':'1px solid transparent'},children:[/*#__PURE__*/_jsx(FiFile,{size:14,style:{color:catInfo.color,flexShrink:0}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.8rem',color:'var(--text-primary)',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',flex:1},children:fileName}),/*#__PURE__*/_jsx(\"span\",{className:\"badge\",style:{fontSize:'0.65rem',padding:'2px 6px',background:fileExt==='pdf'?'#ef4444':fileExt==='docx'?'#3b82f6':fileExt==='xlsx'?'#10b981':'#6b7280',color:'white',borderRadius:'4px',textTransform:'uppercase'},children:fileExt})]},idx);})})]},catKey);})}):/*#__PURE__*//* Tree View */_jsx(\"div\",{className:\"documents-tree card-glass\",style:{padding:'var(--space-md)'},children:renderFolderTree(documentTree.children,0)})}),selectedFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"doc-details-section\",style:{width:'350px',flexShrink:0},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"doc-section card-glass\",style:{padding:'var(--space-md)'},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold\",style:{marginBottom:'var(--space-md)',borderBottom:'1px solid rgba(255,255,255,0.1)',paddingBottom:'var(--space-sm)'},children:\"File Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"doc-info-details\",style:{display:'flex',flexDirection:'column',gap:'var(--space-sm)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",style:{display:'flex',flexDirection:'column',gap:'4px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",style:{fontSize:'0.7rem',color:'var(--text-tertiary)',textTransform:'uppercase'},children:\"File Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",style:{fontSize:'0.85rem',color:'var(--text-primary)',wordBreak:'break-word'},children:selectedFile.split('/').pop()})]}),selectedFile.includes('/')&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",style:{display:'flex',flexDirection:'column',gap:'4px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",style:{fontSize:'0.7rem',color:'var(--text-tertiary)',textTransform:'uppercase'},children:\"Path\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",style:{fontSize:'0.75rem',color:'var(--text-secondary)'},children:selectedFile})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",style:{display:'flex',flexDirection:'column',gap:'4px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",style:{fontSize:'0.7rem',color:'var(--text-tertiary)',textTransform:'uppercase'},children:\"Category\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",style:{fontSize:'0.85rem'},children:((_DOCUMENT_CATEGORIES$=DOCUMENT_CATEGORIES[categorizeDocument(selectedFile)])===null||_DOCUMENT_CATEGORIES$===void 0?void 0:_DOCUMENT_CATEGORIES$.label)||'Other'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",style:{display:'flex',flexDirection:'column',gap:'4px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",style:{fontSize:'0.7rem',color:'var(--text-tertiary)',textTransform:'uppercase'},children:\"Format\"}),/*#__PURE__*/_jsx(\"span\",{className:\"badge\",style:{fontSize:'0.7rem',padding:'4px 8px',background:selectedFile.endsWith('.pdf')?'#ef4444':selectedFile.endsWith('.docx')?'#3b82f6':'#10b981',color:'white',borderRadius:'4px',width:'fit-content',textTransform:'uppercase'},children:selectedFile.split('.').pop()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",style:{display:'flex',flexDirection:'column',gap:'4px',marginTop:'var(--space-sm)'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",style:{fontSize:'0.7rem',color:'var(--text-tertiary)',textTransform:'uppercase'},children:\"Version\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"span\",{className:\"badge\",style:{background:'#10b981',color:'white',fontSize:'0.7rem',padding:'2px 8px'},children:[\"v\",((_documentHistory$sele=documentHistory[selectedFile])===null||_documentHistory$sele===void 0?void 0:_documentHistory$sele.length)||1]}),(((_documentHistory$sele2=documentHistory[selectedFile])===null||_documentHistory$sele2===void 0?void 0:_documentHistory$sele2.length)||1)>1&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'0.7rem',color:'var(--text-secondary)'},children:[/*#__PURE__*/_jsx(FiClock,{size:12,style:{marginRight:'4px'}}),documentHistory[selectedFile].length,\" versions\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'var(--space-sm)',marginTop:'var(--space-md)'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleOpenDocument(selectedFile),className:\"btn btn-primary btn-sm\",style:{flex:1,display:'flex',alignItems:'center',justifyContent:'center',gap:'6px'},children:[/*#__PURE__*/_jsx(FiExternalLink,{size:14}),\" Open\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowReplaceModal(true),className:\"btn btn-secondary btn-sm\",style:{flex:1,display:'flex',alignItems:'center',justifyContent:'center',gap:'6px'},children:[/*#__PURE__*/_jsx(FiRefreshCw,{size:14}),\" Replace\"]})]})]})]}),documentHistory[selectedFile]&&documentHistory[selectedFile].length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"doc-section card-glass\",style:{padding:'var(--space-md)',marginTop:'var(--space-md)'},children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-xs font-semibold\",style:{marginBottom:'var(--space-sm)',display:'flex',alignItems:'center',gap:'6px'},children:[/*#__PURE__*/_jsx(FiClock,{size:14}),\" Change Trail\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px',maxHeight:'200px',overflow:'auto'},children:[...documentHistory[selectedFile]].reverse().map((ver,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:idx===0?'rgba(59, 130, 246, 0.1)':'rgba(255,255,255,0.03)',borderRadius:'6px',borderLeft:idx===0?'3px solid #3b82f6':'3px solid transparent'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:'4px'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'0.75rem',fontWeight:600},children:[\"Version \",ver.version]}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.65rem',color:'var(--text-tertiary)'},children:ver.uploadedAt.toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.7rem',color:'var(--text-secondary)',marginBottom:'4px'},children:[\"By: \",ver.uploadedBy]}),ver.changes&&ver.changes.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.65rem',color:'var(--text-tertiary)'},children:ver.changes.map((change,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'flex-start',gap:'4px',marginTop:'2px'},children:[/*#__PURE__*/_jsx(FiCheckCircle,{size:10,style:{color:'#10b981',marginTop:'2px'}}),/*#__PURE__*/_jsx(\"span\",{children:change})]},i))})]},idx))})]})]})]}),showReplaceModal&&selectedFile&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.8)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000},onClick:()=>setShowReplaceModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-glass\",style:{padding:'var(--space-xl)',maxWidth:'500px',width:'90%',background:'var(--bg-secondary)'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"h3\",{style:{marginBottom:'var(--space-md)',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(FiRefreshCw,{}),\" Replace Document\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'var(--space-md)',background:'rgba(251, 191, 36, 0.1)',borderRadius:'8px',borderLeft:'4px solid #fbbf24',marginBottom:'var(--space-md)'},children:[/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.85rem',color:'var(--text-primary)',fontWeight:500},children:[\"Replacing: \",selectedFile.split('/').pop()]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.75rem',color:'var(--text-secondary)',marginTop:'4px'},children:[\"Current version: v\",((_documentHistory$sele3=documentHistory[selectedFile])===null||_documentHistory$sele3===void 0?void 0:_documentHistory$sele3.length)||1]})]}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.85rem',color:'var(--text-secondary)',marginBottom:'var(--space-md)'},children:\"Upload a new version of this document. The previous version will be preserved in the change trail.\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",onChange:handleReplaceDocument,accept:\".pdf,.docx,.xlsx\",style:{display:'none'}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'var(--space-sm)'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},style:{flex:1},children:[/*#__PURE__*/_jsx(FiUpload,{size:16}),\" Select New File\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setShowReplaceModal(false),children:\"Cancel\"})]})]})})]});// Helper function to render folder tree recursively\nfunction renderFolderTree(nodes,depth){return nodes.map((node,idx)=>{if(node.isFolder){const isExpanded=expandedFolders.has(node.path);return/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:depth*16},children:[/*#__PURE__*/_jsxs(\"div\",{onClick:()=>toggleFolder(node.path),style:{display:'flex',alignItems:'center',gap:'6px',padding:'6px 8px',cursor:'pointer',borderRadius:'4px',background:'rgba(255,255,255,0.05)'},children:[isExpanded?/*#__PURE__*/_jsx(FiFolder,{size:14,style:{color:'#fbbf24'}}):/*#__PURE__*/_jsx(FiFolder,{size:14,style:{color:'#fbbf24'}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.85rem',fontWeight:500},children:node.name}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.7rem',color:'var(--text-tertiary)',marginLeft:'auto'},children:node.children.length})]}),isExpanded&&renderFolderTree(node.children,depth+1)]},idx);}else{var _node$name$split$pop;const catInfo=DOCUMENT_CATEGORIES[node.category||'other'];const isSelected=selectedFile===node.path;const fileExt=((_node$name$split$pop=node.name.split('.').pop())===null||_node$name$split$pop===void 0?void 0:_node$name$split$pop.toLowerCase())||'';return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setSelectedFile(node.path),style:{marginLeft:depth*16,display:'flex',alignItems:'center',gap:'6px',padding:'6px 8px',cursor:'pointer',borderRadius:'4px',background:isSelected?'rgba(59, 130, 246, 0.2)':'transparent',border:isSelected?'1px solid rgba(59, 130, 246, 0.5)':'1px solid transparent'},children:[/*#__PURE__*/_jsx(FiFile,{size:14,style:{color:catInfo.color}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.8rem',flex:1,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:node.name}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.6rem',padding:'2px 5px',background:fileExt==='pdf'?'#ef4444':fileExt==='docx'?'#3b82f6':'#10b981',color:'white',borderRadius:'3px',textTransform:'uppercase'},children:fileExt})]},idx);}});}};","map":{"version":3,"names":["React","useState","useEffect","useMemo","useRef","FiFileText","FiUpload","FiChevronDown","FiChevronUp","FiFolder","FiFile","FiExternalLink","FiRefreshCw","FiClock","FiCheckCircle","applicationsApi","jsx","_jsx","jsxs","_jsxs","DOCUMENT_CATEGORIES","label","color","icon","description","categorizeDocument","filename","lower","toLowerCase","includes","match","buildDocumentTree","documents","root","name","path","isFolder","children","forEach","docPath","parts","split","current","part","index","isLast","length","existing","find","c","newNode","slice","join","category","undefined","push","DocumentManagementPanel","_ref","_DOCUMENT_CATEGORIES$","_documentHistory$sele","_documentHistory$sele2","_documentHistory$sele3","applicationId","propDocuments","companyName","expandedFolders","setExpandedFolders","Set","showUploadForm","setShowUploadForm","realDocuments","setRealDocuments","viewMode","setViewMode","selectedFile","setSelectedFile","showReplaceModal","setShowReplaceModal","documentHistory","setDocumentHistory","docLibrary","setDocLibrary","loadingLibrary","setLoadingLibrary","fileInputRef","console","log","fetchDocLibrary","response","fetch","data","json","success","documentLibrary","err","error","getApplication","then","result","application","catch","history","doc","version","pop","uploadedAt","Date","uploadedBy","documentTree","documentsByCategory","groups","toggleFolder","prev","newSet","has","delete","add","handleOpenDocument","alert","concat","handleReplaceDocument","e","_e$target$files","file","target","files","changes","size","toFixed","toLocaleString","currentHistory","newVersion","_objectSpread","handleUploadDocument","_e$target$files2","className","style","display","gap","background","borderRadius","padding","onClick","fontSize","marginBottom","borderLeft","fontWeight","gridTemplateColumns","Object","entries","map","_ref2","pvaraCategory","docs","count","Array","isArray","categoryLabels","border","idx","marginTop","overflow","textOverflow","whiteSpace","type","onChange","accept","flex","minWidth","opacity","flexDirection","_ref3","catKey","catInfo","isExpanded","alignItems","cursor","_fileName$split$pop","fileName","fileExt","isSelected","transition","flexShrink","textTransform","renderFolderTree","width","borderBottom","paddingBottom","wordBreak","endsWith","marginRight","justifyContent","maxHeight","reverse","ver","toLocaleDateString","change","i","position","top","left","right","bottom","zIndex","maxWidth","stopPropagation","ref","_fileInputRef$current","click","nodes","depth","node","marginLeft","_node$name$split$pop"],"sources":["/Users/ubl/Desktop/PVARA-Frontend/src/components/DocumentManagementPanel.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { FiFileText, FiUpload, FiChevronDown, FiChevronUp, FiFolder, FiFile, FiExternalLink, FiRefreshCw, FiClock, FiCheckCircle } from 'react-icons/fi';\nimport { applicationsApi } from '../services/applications.api';\nimport '../styles/document-management.css';\n\ninterface DocumentManagementPanelProps {\n  applicationId: string;\n  documents?: string[];\n  companyName?: string;\n}\n\ninterface DocumentVersion {\n  version: number;\n  filename: string;\n  uploadedAt: Date;\n  uploadedBy: string;\n  changes?: string[];\n}\n\ninterface DocumentHistory {\n  [key: string]: DocumentVersion[];\n}\n\n// PVARA-specific document categories\nconst DOCUMENT_CATEGORIES: Record<string, { label: string; color: string; icon: string; description: string }> = {\n  'pvara-regulations': { \n    label: 'PVARA Ordinance & Regulations', \n    color: '#dc2626', \n    icon: 'üìú',\n    description: 'PVARA Act, NOC Regulations, AML Guidelines'\n  },\n  'noc-application-forms': { \n    label: 'NOC Application Forms', \n    color: '#2563eb', \n    icon: 'üìã',\n    description: 'Form A1, A2, A3, A5 - Official application documents'\n  },\n  'applicant-corporate': { \n    label: 'Applicant Corporate Documents', \n    color: '#7c3aed', \n    icon: 'üè¢',\n    description: 'Certificate of Incorporation, Board Resolutions, MOA'\n  },\n  'applicant-compliance': { \n    label: 'Applicant Compliance Policies', \n    color: '#059669', \n    icon: '‚úÖ',\n    description: 'AML/KYC/KYB Policies, Sanctions, MLRO Procedures'\n  },\n  'applicant-financial': { \n    label: 'Applicant Financial Documents', \n    color: '#d97706', \n    icon: 'üí∞',\n    description: 'Financial Statements, Projections, Audit Reports'\n  },\n  'applicant-technical': { \n    label: 'Applicant Technical & Risk', \n    color: '#0891b2', \n    icon: '‚öôÔ∏è',\n    description: 'Technical Architecture, Risk Assessment, BCP'\n  },\n  'applicant-personnel': { \n    label: 'Key Personnel Documents', \n    color: '#be185d', \n    icon: 'üë§',\n    description: 'Director Forms, MLRO, CFO Documentation'\n  },\n  'regulatory-responses': { \n    label: 'Regulatory Correspondence', \n    color: '#4b5563', \n    icon: 'üì®',\n    description: 'SECP, SBP Comments and Responses'\n  }\n};\n\n// Enhanced categorization for PVARA documents\nfunction categorizeDocument(filename: string): string {\n  const lower = filename.toLowerCase();\n  \n  // PVARA Ordinance & Regulations\n  if (lower.includes('ordinance') || lower.includes('pvara') || lower.includes('moit') || \n      (lower.includes('aml') && lower.includes('.pdf') && !lower.includes('policy'))) {\n    return 'pvara-regulations';\n  }\n  \n  // Regulatory Responses (SECP, SBP)\n  if (lower.includes('secp') || lower.includes('sbp') || lower.includes('comments on')) {\n    return 'regulatory-responses';\n  }\n  \n  // NOC Application Forms (Form A1, A2, A3, A5)\n  if (lower.includes('form a1') || lower.includes('form a2') || lower.includes('form a5') || \n      lower.includes('form_a') || lower.includes('application for no objection') ||\n      lower.includes('outsourcing declaration')) {\n    return 'noc-application-forms';\n  }\n  \n  // Key Personnel Documents (Form A3, individual docs)\n  if (lower.includes('form a3') || lower.includes('a3 forms') || \n      lower.includes('director') || lower.includes('cfo') || lower.includes('mlro') ||\n      lower.match(/chen ling|jimmy su|kaiser|richard teng|wilson|heidi|ryan|sunny|ying pok/)) {\n    return 'applicant-personnel';\n  }\n  \n  // Corporate Documents\n  if (lower.includes('certificate') || lower.includes('apostille') || lower.includes('incorporation') ||\n      lower.includes('board_resolution') || lower.includes('moa') || lower.includes('rom') || \n      lower.includes('robo') || lower.includes('notarial') || lower.includes('constitutive')) {\n    return 'applicant-corporate';\n  }\n  \n  // Compliance Policies\n  if (lower.includes('aml') || lower.includes('kyc') || lower.includes('kyb') || \n      lower.includes('compliance') || lower.includes('sanctions') || lower.includes('edd') ||\n      lower.includes('transaction monitoring') || lower.includes('record keeping') ||\n      lower.includes('training policy')) {\n    return 'applicant-compliance';\n  }\n  \n  // Financial Documents\n  if (lower.includes('financial') || lower.includes('statement')) {\n    return 'applicant-financial';\n  }\n  \n  // Technical & Risk Documents\n  if (lower.includes('technical') || lower.includes('outsourcing') || lower.includes('bcms') || \n      lower.includes('continuity') || lower.includes('risk') || lower.includes('bcp')) {\n    return 'applicant-technical';\n  }\n  \n  return 'noc-application-forms'; // Default to application forms\n}\n\n// Build folder tree from document paths\ninterface FolderNode {\n  name: string;\n  path: string;\n  isFolder: boolean;\n  children: FolderNode[];\n  category?: string;\n}\n\nfunction buildDocumentTree(documents: string[]): FolderNode {\n  const root: FolderNode = { name: 'Documents', path: '', isFolder: true, children: [] };\n  \n  documents.forEach(docPath => {\n    const parts = docPath.split('/');\n    let current = root;\n    \n    parts.forEach((part, index) => {\n      const isLast = index === parts.length - 1;\n      const existing = current.children.find(c => c.name === part);\n      \n      if (existing) {\n        current = existing;\n      } else {\n        const newNode: FolderNode = {\n          name: part,\n          path: parts.slice(0, index + 1).join('/'),\n          isFolder: !isLast,\n          children: [],\n          category: isLast ? categorizeDocument(part) : undefined\n        };\n        current.children.push(newNode);\n        current = newNode;\n      }\n    });\n  });\n  \n  return root;\n}\n\nexport const DocumentManagementPanel: React.FC<DocumentManagementPanelProps> = ({ applicationId, documents: propDocuments, companyName }) => {\n  const [expandedFolders, setExpandedFolders] = useState<Set<string>>(new Set());\n  const [showUploadForm, setShowUploadForm] = useState(false);\n  const [realDocuments, setRealDocuments] = useState<string[]>(propDocuments || []);\n  const [viewMode, setViewMode] = useState<'tree' | 'category'>('category');\n  const [selectedFile, setSelectedFile] = useState<string | null>(null);\n  const [showReplaceModal, setShowReplaceModal] = useState(false);\n  const [documentHistory, setDocumentHistory] = useState<DocumentHistory>({});\n  const [docLibrary, setDocLibrary] = useState<any>(null);\n  const [loadingLibrary, setLoadingLibrary] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Log company name for debugging\n  console.log('DocumentManagementPanel for:', companyName);\n\n  // Fetch document library from API (OpenAI categorized documents)\n  useEffect(() => {\n    const fetchDocLibrary = async () => {\n      try {\n        setLoadingLibrary(true);\n        const response = await fetch('http://localhost:3001/api/applications/documents/library');\n        const data = await response.json();\n        if (data.success) {\n          setDocLibrary(data.documentLibrary);\n        }\n      } catch (err) {\n        console.error('Error fetching document library:', err);\n      } finally {\n        setLoadingLibrary(false);\n      }\n    };\n    fetchDocLibrary();\n  }, []);\n\n  // Fetch documents from API if not provided\n  useEffect(() => {\n    if (!propDocuments) {\n      applicationsApi.getApplication(applicationId).then(result => {\n        if (result.success && result.application.documents) {\n          setRealDocuments(result.application.documents);\n        }\n      }).catch(console.error);\n    }\n  }, [applicationId, propDocuments]);\n\n  // Initialize document history (mock data for demo)\n  useEffect(() => {\n    const history: DocumentHistory = {};\n    realDocuments.forEach(doc => {\n      history[doc] = [{\n        version: 1,\n        filename: doc.split('/').pop() || doc,\n        uploadedAt: new Date('2025-12-09'),\n        uploadedBy: 'Initial Submission'\n      }];\n    });\n    setDocumentHistory(history);\n  }, [realDocuments]);\n\n  // Build document tree\n  const documentTree = useMemo(() => buildDocumentTree(realDocuments), [realDocuments]);\n  \n  // Group documents by category\n  const documentsByCategory = useMemo(() => {\n    const groups: Record<string, string[]> = {};\n    realDocuments.forEach(doc => {\n      const filename = doc.split('/').pop() || doc;\n      const category = categorizeDocument(filename);\n      if (!groups[category]) groups[category] = [];\n      groups[category].push(doc);\n    });\n    return groups;\n  }, [realDocuments]);\n\n  const toggleFolder = (path: string) => {\n    setExpandedFolders(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(path)) {\n        newSet.delete(path);\n      } else {\n        newSet.add(path);\n      }\n      return newSet;\n    });\n  };\n\n  // Open document (simulated - in real app would open actual file)\n  const handleOpenDocument = (docPath: string) => {\n    // In production, this would call backend to serve the file\n    const filename = docPath.split('/').pop() || docPath;\n    alert(`Opening document: ${filename}\\n\\nIn production, this would open the actual file from:\\napplications/${applicationId.includes('001') ? 'APP-001-HTX-Global' : 'APP-002-Binance'}/documents/${docPath}`);\n  };\n\n  // Replace document\n  const handleReplaceDocument = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file || !selectedFile) return;\n    \n    // Track changes (in real app, would compare document contents)\n    const changes = [\n      'Document replaced with new version',\n      `New file: ${file.name}`,\n      `Size: ${(file.size / 1024).toFixed(1)} KB`,\n      `Uploaded: ${new Date().toLocaleString()}`\n    ];\n    \n    // Update history\n    const currentHistory = documentHistory[selectedFile] || [];\n    const newVersion: DocumentVersion = {\n      version: currentHistory.length + 1,\n      filename: file.name,\n      uploadedAt: new Date(),\n      uploadedBy: 'Current User',\n      changes\n    };\n    \n    setDocumentHistory(prev => ({\n      ...prev,\n      [selectedFile]: [...(prev[selectedFile] || []), newVersion]\n    }));\n    \n    setShowReplaceModal(false);\n    alert(`Document \"${selectedFile.split('/').pop()}\" replaced with \"${file.name}\"\\n\\nVersion ${newVersion.version} created with change trail.`);\n  };\n\n  const handleUploadDocument = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    // In a real app, you'd upload to server and refresh the list\n    console.log('Uploading file:', file.name);\n\n    setShowUploadForm(false);\n  };\n\n  return (\n    <div className=\"document-management-panel\">\n      {/* Header */}\n      <div className=\"doc-header card-glass\">\n        <div>\n          <h2 className=\"text-lg font-bold\">Document Repository</h2>\n          <p className=\"text-xs text-secondary\">{realDocuments.length} documents | AI-Categorized with OpenAI gpt-5.2</p>\n        </div>\n        <div style={{ display: 'flex', gap: 'var(--space-sm)' }}>\n          <div className=\"view-toggle\" style={{ display: 'flex', gap: '4px', background: 'rgba(0,0,0,0.2)', borderRadius: '8px', padding: '4px' }}>\n            <button\n              onClick={() => setViewMode('category')}\n              className={`btn btn-sm ${viewMode === 'category' ? 'btn-primary' : ''}`}\n              style={{ fontSize: '0.75rem', padding: '6px 12px' }}\n            >\n              By Category\n            </button>\n            <button\n              onClick={() => setViewMode('tree')}\n              className={`btn btn-sm ${viewMode === 'tree' ? 'btn-primary' : ''}`}\n              style={{ fontSize: '0.75rem', padding: '6px 12px' }}\n            >\n              By Folder\n            </button>\n          </div>\n          <button\n            onClick={() => setShowUploadForm(true)}\n            className=\"btn btn-primary btn-sm\"\n          >\n            <FiUpload size={14} /> Upload\n          </button>\n        </div>\n      </div>\n\n      {/* OpenAI Categorized Documents Section */}\n      {docLibrary && companyName && (\n        <div className=\"ai-categorized-docs card-glass\" style={{ padding: 'var(--space-md)', marginBottom: 'var(--space-md)', borderLeft: '4px solid #8b5cf6', background: 'rgba(139, 92, 246, 0.05)' }}>\n          <div style={{ marginBottom: 'var(--space-md)' }}>\n            <h3 style={{ fontSize: '0.95rem', fontWeight: '600', marginBottom: '0.5rem' }}>‚ú® OpenAI Categorized Documents</h3>\n            <p style={{ fontSize: '0.8rem', color: '#999' }}>Documents analyzed and categorized by OpenAI gpt-5.2 (with full content analysis)</p>\n          </div>\n          \n          {loadingLibrary ? (\n            <p style={{ fontSize: '0.8rem', color: '#999' }}>Loading AI categories...</p>\n          ) : docLibrary[companyName] ? (\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: 'var(--space-sm)' }}>\n              {Object.entries(docLibrary[companyName]).map(([pvaraCategory, docs]: [string, any]) => {\n                const count = Array.isArray(docs) ? docs.length : 0;\n                if (count === 0) return null;\n                \n                const categoryLabels: Record<string, string> = {\n                  'ordinance': 'üìú Ordinance',\n                  'regulations': 'üìã Regulations',\n                  'application-form': 'üìù Application Forms',\n                  'submitted-application': '‚úÖ Submitted Applications',\n                  'supporting-document': 'üìé Supporting Documents'\n                };\n                \n                return (\n                  <div key={pvaraCategory} style={{ padding: '0.75rem', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '6px', background: 'rgba(0,0,0,0.2)' }}>\n                    <div style={{ fontWeight: '600', fontSize: '0.9rem', marginBottom: '0.5rem' }}>\n                      {categoryLabels[pvaraCategory] || pvaraCategory}\n                    </div>\n                    <div style={{ fontSize: '0.85rem', color: '#4ade80' }}>\n                      {count} document{count !== 1 ? 's' : ''}\n                    </div>\n                    {Array.isArray(docs) && docs.slice(0, 2).map((doc: any, idx: number) => (\n                      <div key={idx} style={{ fontSize: '0.75rem', color: '#999', marginTop: '0.25rem', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\n                        ‚Ä¢ {doc.name}\n                      </div>\n                    ))}\n                    {count > 2 && <div style={{ fontSize: '0.75rem', color: '#666', marginTop: '0.25rem' }}>+ {count - 2} more</div>}\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <p style={{ fontSize: '0.8rem', color: '#999' }}>No AI categorized documents found for this applicant</p>\n          )}\n        </div>\n      )}\n      {showUploadForm && (\n        <div className=\"upload-form card-glass\">\n          <input\n            type=\"file\"\n            onChange={handleUploadDocument}\n            className=\"text-sm\"\n            accept=\".pdf,.docx,.xlsx,.jpg,.png\"\n          />\n          <button onClick={() => setShowUploadForm(false)} className=\"btn btn-secondary btn-sm\">\n            Cancel\n          </button>\n        </div>\n      )}\n\n      <div className=\"doc-content\" style={{ display: 'flex', gap: 'var(--space-lg)' }}>\n        {/* Organized Documents List */}\n        <div className=\"doc-list-section\" style={{ flex: 1, minWidth: 0 }}>\n          {realDocuments.length === 0 ? (\n            <div className=\"empty-state card-glass\">\n              <FiFileText size={24} opacity={0.3} />\n              <p className=\"text-xs text-secondary\">No documents found in application folder</p>\n            </div>\n          ) : viewMode === 'category' ? (\n            /* Category View */\n            <div className=\"documents-categories\" style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-md)' }}>\n              {Object.entries(DOCUMENT_CATEGORIES).map(([catKey, catInfo]) => {\n                const docs = documentsByCategory[catKey] || [];\n                if (docs.length === 0) return null;\n                \n                const isExpanded = expandedFolders.has(catKey);\n                \n                return (\n                  <div key={catKey} className=\"category-section card-glass\" style={{ padding: 'var(--space-md)', borderLeft: `4px solid ${catInfo.color}` }}>\n                    <div \n                      className=\"category-header\" \n                      onClick={() => toggleFolder(catKey)}\n                      style={{ \n                        display: 'flex', \n                        alignItems: 'center', \n                        gap: 'var(--space-sm)', \n                        cursor: 'pointer',\n                        marginBottom: isExpanded ? 'var(--space-sm)' : 0\n                      }}\n                    >\n                      <span style={{ fontSize: '1.2rem' }}>{catInfo.icon}</span>\n                      <span style={{ fontWeight: 600, flex: 1, color: 'var(--text-primary)' }}>{catInfo.label}</span>\n                      <span className=\"badge\" style={{ background: catInfo.color, color: 'white', fontSize: '0.7rem' }}>\n                        {docs.length}\n                      </span>\n                      {isExpanded ? <FiChevronUp /> : <FiChevronDown />}\n                    </div>\n                    \n                    {isExpanded && (\n                      <div className=\"category-files\" style={{ display: 'flex', flexDirection: 'column', gap: '6px', marginTop: 'var(--space-sm)' }}>\n                        {docs.map((docPath, idx) => {\n                          const fileName = docPath.split('/').pop() || docPath;\n                          const fileExt = fileName.split('.').pop()?.toLowerCase() || '';\n                          const isSelected = selectedFile === docPath;\n                          \n                          return (\n                            <div \n                              key={idx}\n                              onClick={() => setSelectedFile(docPath)}\n                              className={`file-item ${isSelected ? 'selected' : ''}`}\n                              style={{\n                                display: 'flex',\n                                alignItems: 'center',\n                                gap: 'var(--space-sm)',\n                                padding: '8px 12px',\n                                background: isSelected ? 'rgba(59, 130, 246, 0.2)' : 'rgba(255,255,255,0.05)',\n                                borderRadius: '6px',\n                                cursor: 'pointer',\n                                transition: 'all 0.2s ease',\n                                border: isSelected ? '1px solid rgba(59, 130, 246, 0.5)' : '1px solid transparent'\n                              }}\n                            >\n                              <FiFile size={14} style={{ color: catInfo.color, flexShrink: 0 }} />\n                              <span style={{ \n                                fontSize: '0.8rem', \n                                color: 'var(--text-primary)', \n                                overflow: 'hidden', \n                                textOverflow: 'ellipsis', \n                                whiteSpace: 'nowrap',\n                                flex: 1\n                              }}>\n                                {fileName}\n                              </span>\n                              <span className=\"badge\" style={{ \n                                fontSize: '0.65rem', \n                                padding: '2px 6px',\n                                background: fileExt === 'pdf' ? '#ef4444' : fileExt === 'docx' ? '#3b82f6' : fileExt === 'xlsx' ? '#10b981' : '#6b7280',\n                                color: 'white',\n                                borderRadius: '4px',\n                                textTransform: 'uppercase'\n                              }}>\n                                {fileExt}\n                              </span>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            /* Tree View */\n            <div className=\"documents-tree card-glass\" style={{ padding: 'var(--space-md)' }}>\n              {renderFolderTree(documentTree.children, 0)}\n            </div>\n          )}\n        </div>\n\n        {/* File Details Panel */}\n        {selectedFile && (\n          <div className=\"doc-details-section\" style={{ width: '350px', flexShrink: 0 }}>\n            <div className=\"doc-section card-glass\" style={{ padding: 'var(--space-md)' }}>\n              <h3 className=\"text-sm font-semibold\" style={{ marginBottom: 'var(--space-md)', borderBottom: '1px solid rgba(255,255,255,0.1)', paddingBottom: 'var(--space-sm)' }}>\n                File Details\n              </h3>\n              <div className=\"doc-info-details\" style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-sm)' }}>\n                <div className=\"info-row\" style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n                  <span className=\"label\" style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)', textTransform: 'uppercase' }}>File Name</span>\n                  <span className=\"value\" style={{ fontSize: '0.85rem', color: 'var(--text-primary)', wordBreak: 'break-word' }}>\n                    {selectedFile.split('/').pop()}\n                  </span>\n                </div>\n                {selectedFile.includes('/') && (\n                  <div className=\"info-row\" style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n                    <span className=\"label\" style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)', textTransform: 'uppercase' }}>Path</span>\n                    <span className=\"value\" style={{ fontSize: '0.75rem', color: 'var(--text-secondary)' }}>{selectedFile}</span>\n                  </div>\n                )}\n                <div className=\"info-row\" style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n                  <span className=\"label\" style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)', textTransform: 'uppercase' }}>Category</span>\n                  <span className=\"value\" style={{ fontSize: '0.85rem' }}>\n                    {DOCUMENT_CATEGORIES[categorizeDocument(selectedFile)]?.label || 'Other'}\n                  </span>\n                </div>\n                <div className=\"info-row\" style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n                  <span className=\"label\" style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)', textTransform: 'uppercase' }}>Format</span>\n                  <span className=\"badge\" style={{ \n                    fontSize: '0.7rem',\n                    padding: '4px 8px',\n                    background: selectedFile.endsWith('.pdf') ? '#ef4444' : selectedFile.endsWith('.docx') ? '#3b82f6' : '#10b981',\n                    color: 'white',\n                    borderRadius: '4px',\n                    width: 'fit-content',\n                    textTransform: 'uppercase'\n                  }}>\n                    {selectedFile.split('.').pop()}\n                  </span>\n                </div>\n\n                {/* Version Info */}\n                <div className=\"info-row\" style={{ display: 'flex', flexDirection: 'column', gap: '4px', marginTop: 'var(--space-sm)' }}>\n                  <span className=\"label\" style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)', textTransform: 'uppercase' }}>Version</span>\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <span className=\"badge\" style={{ background: '#10b981', color: 'white', fontSize: '0.7rem', padding: '2px 8px' }}>\n                      v{documentHistory[selectedFile]?.length || 1}\n                    </span>\n                    {(documentHistory[selectedFile]?.length || 1) > 1 && (\n                      <span style={{ fontSize: '0.7rem', color: 'var(--text-secondary)' }}>\n                        <FiClock size={12} style={{ marginRight: '4px' }} />\n                        {documentHistory[selectedFile].length} versions\n                      </span>\n                    )}\n                  </div>\n                </div>\n\n                {/* Action Buttons */}\n                <div style={{ display: 'flex', gap: 'var(--space-sm)', marginTop: 'var(--space-md)' }}>\n                  <button\n                    onClick={() => handleOpenDocument(selectedFile)}\n                    className=\"btn btn-primary btn-sm\"\n                    style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '6px' }}\n                  >\n                    <FiExternalLink size={14} /> Open\n                  </button>\n                  <button\n                    onClick={() => setShowReplaceModal(true)}\n                    className=\"btn btn-secondary btn-sm\"\n                    style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '6px' }}\n                  >\n                    <FiRefreshCw size={14} /> Replace\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Version History Card */}\n            {documentHistory[selectedFile] && documentHistory[selectedFile].length > 1 && (\n              <div className=\"doc-section card-glass\" style={{ padding: 'var(--space-md)', marginTop: 'var(--space-md)' }}>\n                <h4 className=\"text-xs font-semibold\" style={{ marginBottom: 'var(--space-sm)', display: 'flex', alignItems: 'center', gap: '6px' }}>\n                  <FiClock size={14} /> Change Trail\n                </h4>\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px', maxHeight: '200px', overflow: 'auto' }}>\n                  {[...documentHistory[selectedFile]].reverse().map((ver, idx) => (\n                    <div \n                      key={idx} \n                      style={{ \n                        padding: '8px', \n                        background: idx === 0 ? 'rgba(59, 130, 246, 0.1)' : 'rgba(255,255,255,0.03)',\n                        borderRadius: '6px',\n                        borderLeft: idx === 0 ? '3px solid #3b82f6' : '3px solid transparent'\n                      }}\n                    >\n                      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '4px' }}>\n                        <span style={{ fontSize: '0.75rem', fontWeight: 600 }}>Version {ver.version}</span>\n                        <span style={{ fontSize: '0.65rem', color: 'var(--text-tertiary)' }}>\n                          {ver.uploadedAt.toLocaleDateString()}\n                        </span>\n                      </div>\n                      <p style={{ fontSize: '0.7rem', color: 'var(--text-secondary)', marginBottom: '4px' }}>\n                        By: {ver.uploadedBy}\n                      </p>\n                      {ver.changes && ver.changes.length > 0 && (\n                        <div style={{ fontSize: '0.65rem', color: 'var(--text-tertiary)' }}>\n                          {ver.changes.map((change, i) => (\n                            <div key={i} style={{ display: 'flex', alignItems: 'flex-start', gap: '4px', marginTop: '2px' }}>\n                              <FiCheckCircle size={10} style={{ color: '#10b981', marginTop: '2px' }} />\n                              <span>{change}</span>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Replace Document Modal */}\n      {showReplaceModal && selectedFile && (\n        <div \n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            background: 'rgba(0,0,0,0.8)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 1000\n          }}\n          onClick={() => setShowReplaceModal(false)}\n        >\n          <div \n            className=\"card-glass\"\n            style={{ \n              padding: 'var(--space-xl)', \n              maxWidth: '500px', \n              width: '90%',\n              background: 'var(--bg-secondary)'\n            }}\n            onClick={e => e.stopPropagation()}\n          >\n            <h3 style={{ marginBottom: 'var(--space-md)', display: 'flex', alignItems: 'center', gap: '8px' }}>\n              <FiRefreshCw /> Replace Document\n            </h3>\n            <div style={{ \n              padding: 'var(--space-md)', \n              background: 'rgba(251, 191, 36, 0.1)', \n              borderRadius: '8px',\n              borderLeft: '4px solid #fbbf24',\n              marginBottom: 'var(--space-md)'\n            }}>\n              <p style={{ fontSize: '0.85rem', color: 'var(--text-primary)', fontWeight: 500 }}>\n                Replacing: {selectedFile.split('/').pop()}\n              </p>\n              <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)', marginTop: '4px' }}>\n                Current version: v{documentHistory[selectedFile]?.length || 1}\n              </p>\n            </div>\n            <p style={{ fontSize: '0.85rem', color: 'var(--text-secondary)', marginBottom: 'var(--space-md)' }}>\n              Upload a new version of this document. The previous version will be preserved in the change trail.\n            </p>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              onChange={handleReplaceDocument}\n              accept=\".pdf,.docx,.xlsx\"\n              style={{ display: 'none' }}\n            />\n            <div style={{ display: 'flex', gap: 'var(--space-sm)' }}>\n              <button \n                className=\"btn btn-primary\"\n                onClick={() => fileInputRef.current?.click()}\n                style={{ flex: 1 }}\n              >\n                <FiUpload size={16} /> Select New File\n              </button>\n              <button \n                className=\"btn btn-secondary\"\n                onClick={() => setShowReplaceModal(false)}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n  \n  // Helper function to render folder tree recursively\n  function renderFolderTree(nodes: FolderNode[], depth: number): React.ReactNode {\n    return nodes.map((node, idx) => {\n      if (node.isFolder) {\n        const isExpanded = expandedFolders.has(node.path);\n        return (\n          <div key={idx} style={{ marginLeft: depth * 16 }}>\n            <div \n              onClick={() => toggleFolder(node.path)}\n              style={{ \n                display: 'flex', \n                alignItems: 'center', \n                gap: '6px', \n                padding: '6px 8px',\n                cursor: 'pointer',\n                borderRadius: '4px',\n                background: 'rgba(255,255,255,0.05)'\n              }}\n            >\n              {isExpanded ? <FiFolder size={14} style={{ color: '#fbbf24' }} /> : <FiFolder size={14} style={{ color: '#fbbf24' }} />}\n              <span style={{ fontSize: '0.85rem', fontWeight: 500 }}>{node.name}</span>\n              <span style={{ fontSize: '0.7rem', color: 'var(--text-tertiary)', marginLeft: 'auto' }}>\n                {node.children.length}\n              </span>\n            </div>\n            {isExpanded && renderFolderTree(node.children, depth + 1)}\n          </div>\n        );\n      } else {\n        const catInfo = DOCUMENT_CATEGORIES[node.category || 'other'];\n        const isSelected = selectedFile === node.path;\n        const fileExt = node.name.split('.').pop()?.toLowerCase() || '';\n        \n        return (\n          <div \n            key={idx}\n            onClick={() => setSelectedFile(node.path)}\n            style={{ \n              marginLeft: depth * 16,\n              display: 'flex', \n              alignItems: 'center', \n              gap: '6px', \n              padding: '6px 8px',\n              cursor: 'pointer',\n              borderRadius: '4px',\n              background: isSelected ? 'rgba(59, 130, 246, 0.2)' : 'transparent',\n              border: isSelected ? '1px solid rgba(59, 130, 246, 0.5)' : '1px solid transparent'\n            }}\n          >\n            <FiFile size={14} style={{ color: catInfo.color }} />\n            <span style={{ fontSize: '0.8rem', flex: 1, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\n              {node.name}\n            </span>\n            <span style={{ \n              fontSize: '0.6rem', \n              padding: '2px 5px',\n              background: fileExt === 'pdf' ? '#ef4444' : fileExt === 'docx' ? '#3b82f6' : '#10b981',\n              color: 'white',\n              borderRadius: '3px',\n              textTransform: 'uppercase'\n            }}>\n              {fileExt}\n            </span>\n          </div>\n        );\n      }\n    });\n  }\n};\n"],"mappings":"sHAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,OAAO,CAAEC,MAAM,KAAQ,OAAO,CACnE,OAASC,UAAU,CAAEC,QAAQ,CAAEC,aAAa,CAAEC,WAAW,CAAEC,QAAQ,CAAEC,MAAM,CAAEC,cAAc,CAAEC,WAAW,CAAEC,OAAO,CAAEC,aAAa,KAAQ,gBAAgB,CACxJ,OAASC,eAAe,KAAQ,8BAA8B,CAC9D,MAAO,mCAAmC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAoB3C;AACA,KAAM,CAAAC,mBAAwG,CAAG,CAC/G,mBAAmB,CAAE,CACnBC,KAAK,CAAE,+BAA+B,CACtCC,KAAK,CAAE,SAAS,CAChBC,IAAI,CAAE,IAAI,CACVC,WAAW,CAAE,4CACf,CAAC,CACD,uBAAuB,CAAE,CACvBH,KAAK,CAAE,uBAAuB,CAC9BC,KAAK,CAAE,SAAS,CAChBC,IAAI,CAAE,IAAI,CACVC,WAAW,CAAE,sDACf,CAAC,CACD,qBAAqB,CAAE,CACrBH,KAAK,CAAE,+BAA+B,CACtCC,KAAK,CAAE,SAAS,CAChBC,IAAI,CAAE,IAAI,CACVC,WAAW,CAAE,sDACf,CAAC,CACD,sBAAsB,CAAE,CACtBH,KAAK,CAAE,+BAA+B,CACtCC,KAAK,CAAE,SAAS,CAChBC,IAAI,CAAE,GAAG,CACTC,WAAW,CAAE,kDACf,CAAC,CACD,qBAAqB,CAAE,CACrBH,KAAK,CAAE,+BAA+B,CACtCC,KAAK,CAAE,SAAS,CAChBC,IAAI,CAAE,IAAI,CACVC,WAAW,CAAE,kDACf,CAAC,CACD,qBAAqB,CAAE,CACrBH,KAAK,CAAE,4BAA4B,CACnCC,KAAK,CAAE,SAAS,CAChBC,IAAI,CAAE,IAAI,CACVC,WAAW,CAAE,8CACf,CAAC,CACD,qBAAqB,CAAE,CACrBH,KAAK,CAAE,yBAAyB,CAChCC,KAAK,CAAE,SAAS,CAChBC,IAAI,CAAE,IAAI,CACVC,WAAW,CAAE,yCACf,CAAC,CACD,sBAAsB,CAAE,CACtBH,KAAK,CAAE,2BAA2B,CAClCC,KAAK,CAAE,SAAS,CAChBC,IAAI,CAAE,IAAI,CACVC,WAAW,CAAE,kCACf,CACF,CAAC,CAED;AACA,QAAS,CAAAC,kBAAkBA,CAACC,QAAgB,CAAU,CACpD,KAAM,CAAAC,KAAK,CAAGD,QAAQ,CAACE,WAAW,CAAC,CAAC,CAEpC;AACA,GAAID,KAAK,CAACE,QAAQ,CAAC,WAAW,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,OAAO,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,MAAM,CAAC,EAC/EF,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAI,CAACF,KAAK,CAACE,QAAQ,CAAC,QAAQ,CAAE,CAAE,CAClF,MAAO,mBAAmB,CAC5B,CAEA;AACA,GAAIF,KAAK,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,aAAa,CAAC,CAAE,CACpF,MAAO,sBAAsB,CAC/B,CAEA;AACA,GAAIF,KAAK,CAACE,QAAQ,CAAC,SAAS,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,SAAS,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,SAAS,CAAC,EACnFF,KAAK,CAACE,QAAQ,CAAC,QAAQ,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,8BAA8B,CAAC,EAC1EF,KAAK,CAACE,QAAQ,CAAC,yBAAyB,CAAC,CAAE,CAC7C,MAAO,uBAAuB,CAChC,CAEA;AACA,GAAIF,KAAK,CAACE,QAAQ,CAAC,SAAS,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,UAAU,CAAC,EACvDF,KAAK,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,MAAM,CAAC,EAC7EF,KAAK,CAACG,KAAK,CAAC,yEAAyE,CAAC,CAAE,CAC1F,MAAO,qBAAqB,CAC9B,CAEA;AACA,GAAIH,KAAK,CAACE,QAAQ,CAAC,aAAa,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,WAAW,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,eAAe,CAAC,EAC/FF,KAAK,CAACE,QAAQ,CAAC,kBAAkB,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,EACpFF,KAAK,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,cAAc,CAAC,CAAE,CAC1F,MAAO,qBAAqB,CAC9B,CAEA;AACA,GAAIF,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,EACvEF,KAAK,CAACE,QAAQ,CAAC,YAAY,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,WAAW,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,EACpFF,KAAK,CAACE,QAAQ,CAAC,wBAAwB,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,gBAAgB,CAAC,EAC5EF,KAAK,CAACE,QAAQ,CAAC,iBAAiB,CAAC,CAAE,CACrC,MAAO,sBAAsB,CAC/B,CAEA;AACA,GAAIF,KAAK,CAACE,QAAQ,CAAC,WAAW,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,WAAW,CAAC,CAAE,CAC9D,MAAO,qBAAqB,CAC9B,CAEA;AACA,GAAIF,KAAK,CAACE,QAAQ,CAAC,WAAW,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,aAAa,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,MAAM,CAAC,EACtFF,KAAK,CAACE,QAAQ,CAAC,YAAY,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,CAAE,CACnF,MAAO,qBAAqB,CAC9B,CAEA,MAAO,uBAAuB,CAAE;AAClC,CAEA;AASA,QAAS,CAAAE,iBAAiBA,CAACC,SAAmB,CAAc,CAC1D,KAAM,CAAAC,IAAgB,CAAG,CAAEC,IAAI,CAAE,WAAW,CAAEC,IAAI,CAAE,EAAE,CAAEC,QAAQ,CAAE,IAAI,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAEtFL,SAAS,CAACM,OAAO,CAACC,OAAO,EAAI,CAC3B,KAAM,CAAAC,KAAK,CAAGD,OAAO,CAACE,KAAK,CAAC,GAAG,CAAC,CAChC,GAAI,CAAAC,OAAO,CAAGT,IAAI,CAElBO,KAAK,CAACF,OAAO,CAAC,CAACK,IAAI,CAAEC,KAAK,GAAK,CAC7B,KAAM,CAAAC,MAAM,CAAGD,KAAK,GAAKJ,KAAK,CAACM,MAAM,CAAG,CAAC,CACzC,KAAM,CAAAC,QAAQ,CAAGL,OAAO,CAACL,QAAQ,CAACW,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACf,IAAI,GAAKS,IAAI,CAAC,CAE5D,GAAII,QAAQ,CAAE,CACZL,OAAO,CAAGK,QAAQ,CACpB,CAAC,IAAM,CACL,KAAM,CAAAG,OAAmB,CAAG,CAC1BhB,IAAI,CAAES,IAAI,CACVR,IAAI,CAAEK,KAAK,CAACW,KAAK,CAAC,CAAC,CAAEP,KAAK,CAAG,CAAC,CAAC,CAACQ,IAAI,CAAC,GAAG,CAAC,CACzChB,QAAQ,CAAE,CAACS,MAAM,CACjBR,QAAQ,CAAE,EAAE,CACZgB,QAAQ,CAAER,MAAM,CAAGpB,kBAAkB,CAACkB,IAAI,CAAC,CAAGW,SAChD,CAAC,CACDZ,OAAO,CAACL,QAAQ,CAACkB,IAAI,CAACL,OAAO,CAAC,CAC9BR,OAAO,CAAGQ,OAAO,CACnB,CACF,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF,MAAO,CAAAjB,IAAI,CACb,CAEA,MAAO,MAAM,CAAAuB,uBAA+D,CAAGC,IAAA,EAA8D,KAAAC,qBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,IAA7D,CAAEC,aAAa,CAAE9B,SAAS,CAAE+B,aAAa,CAAEC,WAAY,CAAC,CAAAP,IAAA,CACtI,KAAM,CAACQ,eAAe,CAAEC,kBAAkB,CAAC,CAAGjE,QAAQ,CAAc,GAAI,CAAAkE,GAAG,CAAC,CAAC,CAAC,CAC9E,KAAM,CAACC,cAAc,CAAEC,iBAAiB,CAAC,CAAGpE,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACqE,aAAa,CAAEC,gBAAgB,CAAC,CAAGtE,QAAQ,CAAW8D,aAAa,EAAI,EAAE,CAAC,CACjF,KAAM,CAACS,QAAQ,CAAEC,WAAW,CAAC,CAAGxE,QAAQ,CAAsB,UAAU,CAAC,CACzE,KAAM,CAACyE,YAAY,CAAEC,eAAe,CAAC,CAAG1E,QAAQ,CAAgB,IAAI,CAAC,CACrE,KAAM,CAAC2E,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG5E,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAAC6E,eAAe,CAAEC,kBAAkB,CAAC,CAAG9E,QAAQ,CAAkB,CAAC,CAAC,CAAC,CAC3E,KAAM,CAAC+E,UAAU,CAAEC,aAAa,CAAC,CAAGhF,QAAQ,CAAM,IAAI,CAAC,CACvD,KAAM,CAACiF,cAAc,CAAEC,iBAAiB,CAAC,CAAGlF,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAAAmF,YAAY,CAAGhF,MAAM,CAAmB,IAAI,CAAC,CAEnD;AACAiF,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAEtB,WAAW,CAAC,CAExD;AACA9D,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqF,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACFJ,iBAAiB,CAAC,IAAI,CAAC,CACvB,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,0DAA0D,CAAC,CACxF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAClC,GAAID,IAAI,CAACE,OAAO,CAAE,CAChBX,aAAa,CAACS,IAAI,CAACG,eAAe,CAAC,CACrC,CACF,CAAE,MAAOC,GAAG,CAAE,CACZT,OAAO,CAACU,KAAK,CAAC,kCAAkC,CAAED,GAAG,CAAC,CACxD,CAAC,OAAS,CACRX,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CACDI,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN;AACArF,SAAS,CAAC,IAAM,CACd,GAAI,CAAC6D,aAAa,CAAE,CAClBhD,eAAe,CAACiF,cAAc,CAAClC,aAAa,CAAC,CAACmC,IAAI,CAACC,MAAM,EAAI,CAC3D,GAAIA,MAAM,CAACN,OAAO,EAAIM,MAAM,CAACC,WAAW,CAACnE,SAAS,CAAE,CAClDuC,gBAAgB,CAAC2B,MAAM,CAACC,WAAW,CAACnE,SAAS,CAAC,CAChD,CACF,CAAC,CAAC,CAACoE,KAAK,CAACf,OAAO,CAACU,KAAK,CAAC,CACzB,CACF,CAAC,CAAE,CAACjC,aAAa,CAAEC,aAAa,CAAC,CAAC,CAElC;AACA7D,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmG,OAAwB,CAAG,CAAC,CAAC,CACnC/B,aAAa,CAAChC,OAAO,CAACgE,GAAG,EAAI,CAC3BD,OAAO,CAACC,GAAG,CAAC,CAAG,CAAC,CACdC,OAAO,CAAE,CAAC,CACV7E,QAAQ,CAAE4E,GAAG,CAAC7D,KAAK,CAAC,GAAG,CAAC,CAAC+D,GAAG,CAAC,CAAC,EAAIF,GAAG,CACrCG,UAAU,CAAE,GAAI,CAAAC,IAAI,CAAC,YAAY,CAAC,CAClCC,UAAU,CAAE,oBACd,CAAC,CAAC,CACJ,CAAC,CAAC,CACF5B,kBAAkB,CAACsB,OAAO,CAAC,CAC7B,CAAC,CAAE,CAAC/B,aAAa,CAAC,CAAC,CAEnB;AACA,KAAM,CAAAsC,YAAY,CAAGzG,OAAO,CAAC,IAAM4B,iBAAiB,CAACuC,aAAa,CAAC,CAAE,CAACA,aAAa,CAAC,CAAC,CAErF;AACA,KAAM,CAAAuC,mBAAmB,CAAG1G,OAAO,CAAC,IAAM,CACxC,KAAM,CAAA2G,MAAgC,CAAG,CAAC,CAAC,CAC3CxC,aAAa,CAAChC,OAAO,CAACgE,GAAG,EAAI,CAC3B,KAAM,CAAA5E,QAAQ,CAAG4E,GAAG,CAAC7D,KAAK,CAAC,GAAG,CAAC,CAAC+D,GAAG,CAAC,CAAC,EAAIF,GAAG,CAC5C,KAAM,CAAAjD,QAAQ,CAAG5B,kBAAkB,CAACC,QAAQ,CAAC,CAC7C,GAAI,CAACoF,MAAM,CAACzD,QAAQ,CAAC,CAAEyD,MAAM,CAACzD,QAAQ,CAAC,CAAG,EAAE,CAC5CyD,MAAM,CAACzD,QAAQ,CAAC,CAACE,IAAI,CAAC+C,GAAG,CAAC,CAC5B,CAAC,CAAC,CACF,MAAO,CAAAQ,MAAM,CACf,CAAC,CAAE,CAACxC,aAAa,CAAC,CAAC,CAEnB,KAAM,CAAAyC,YAAY,CAAI5E,IAAY,EAAK,CACrC+B,kBAAkB,CAAC8C,IAAI,EAAI,CACzB,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAA9C,GAAG,CAAC6C,IAAI,CAAC,CAC5B,GAAIC,MAAM,CAACC,GAAG,CAAC/E,IAAI,CAAC,CAAE,CACpB8E,MAAM,CAACE,MAAM,CAAChF,IAAI,CAAC,CACrB,CAAC,IAAM,CACL8E,MAAM,CAACG,GAAG,CAACjF,IAAI,CAAC,CAClB,CACA,MAAO,CAAA8E,MAAM,CACf,CAAC,CAAC,CACJ,CAAC,CAED;AACA,KAAM,CAAAI,kBAAkB,CAAI9E,OAAe,EAAK,CAC9C;AACA,KAAM,CAAAb,QAAQ,CAAGa,OAAO,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC+D,GAAG,CAAC,CAAC,EAAIjE,OAAO,CACpD+E,KAAK,sBAAAC,MAAA,CAAsB7F,QAAQ,4EAAA6F,MAAA,CAA0EzD,aAAa,CAACjC,QAAQ,CAAC,KAAK,CAAC,CAAG,oBAAoB,CAAG,iBAAiB,gBAAA0F,MAAA,CAAchF,OAAO,CAAE,CAAC,CAC/M,CAAC,CAED;AACA,KAAM,CAAAiF,qBAAqB,CAAIC,CAAsC,EAAK,KAAAC,eAAA,CACxE,KAAM,CAAAC,IAAI,EAAAD,eAAA,CAAGD,CAAC,CAACG,MAAM,CAACC,KAAK,UAAAH,eAAA,iBAAdA,eAAA,CAAiB,CAAC,CAAC,CAChC,GAAI,CAACC,IAAI,EAAI,CAACjD,YAAY,CAAE,OAE5B;AACA,KAAM,CAAAoD,OAAO,CAAG,CACd,oCAAoC,cAAAP,MAAA,CACvBI,IAAI,CAACzF,IAAI,WAAAqF,MAAA,CACb,CAACI,IAAI,CAACI,IAAI,CAAG,IAAI,EAAEC,OAAO,CAAC,CAAC,CAAC,qBAAAT,MAAA,CACzB,GAAI,CAAAb,IAAI,CAAC,CAAC,CAACuB,cAAc,CAAC,CAAC,EACzC,CAED;AACA,KAAM,CAAAC,cAAc,CAAGpD,eAAe,CAACJ,YAAY,CAAC,EAAI,EAAE,CAC1D,KAAM,CAAAyD,UAA2B,CAAG,CAClC5B,OAAO,CAAE2B,cAAc,CAACpF,MAAM,CAAG,CAAC,CAClCpB,QAAQ,CAAEiG,IAAI,CAACzF,IAAI,CACnBuE,UAAU,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CACtBC,UAAU,CAAE,cAAc,CAC1BmB,OACF,CAAC,CAED/C,kBAAkB,CAACiC,IAAI,EAAAoB,aAAA,CAAAA,aAAA,IAClBpB,IAAI,MACP,CAACtC,YAAY,EAAG,CAAC,IAAIsC,IAAI,CAACtC,YAAY,CAAC,EAAI,EAAE,CAAC,CAAEyD,UAAU,CAAC,EAC3D,CAAC,CAEHtD,mBAAmB,CAAC,KAAK,CAAC,CAC1ByC,KAAK,eAAAC,MAAA,CAAc7C,YAAY,CAACjC,KAAK,CAAC,GAAG,CAAC,CAAC+D,GAAG,CAAC,CAAC,wBAAAe,MAAA,CAAoBI,IAAI,CAACzF,IAAI,mBAAAqF,MAAA,CAAgBY,UAAU,CAAC5B,OAAO,+BAA6B,CAAC,CAC/I,CAAC,CAED,KAAM,CAAA8B,oBAAoB,CAAIZ,CAAsC,EAAK,KAAAa,gBAAA,CACvE,KAAM,CAAAX,IAAI,EAAAW,gBAAA,CAAGb,CAAC,CAACG,MAAM,CAACC,KAAK,UAAAS,gBAAA,iBAAdA,gBAAA,CAAiB,CAAC,CAAC,CAChC,GAAI,CAACX,IAAI,CAAE,OACX;AACAtC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEqC,IAAI,CAACzF,IAAI,CAAC,CAEzCmC,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CAED,mBACElD,KAAA,QAAKoH,SAAS,CAAC,2BAA2B,CAAAlG,QAAA,eAExClB,KAAA,QAAKoH,SAAS,CAAC,uBAAuB,CAAAlG,QAAA,eACpClB,KAAA,QAAAkB,QAAA,eACEpB,IAAA,OAAIsH,SAAS,CAAC,mBAAmB,CAAAlG,QAAA,CAAC,qBAAmB,CAAI,CAAC,cAC1DlB,KAAA,MAAGoH,SAAS,CAAC,wBAAwB,CAAAlG,QAAA,EAAEiC,aAAa,CAACxB,MAAM,CAAC,iDAA+C,EAAG,CAAC,EAC5G,CAAC,cACN3B,KAAA,QAAKqH,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,iBAAkB,CAAE,CAAArG,QAAA,eACtDlB,KAAA,QAAKoH,SAAS,CAAC,aAAa,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,KAAK,CAAEC,UAAU,CAAE,iBAAiB,CAAEC,YAAY,CAAE,KAAK,CAAEC,OAAO,CAAE,KAAM,CAAE,CAAAxG,QAAA,eACtIpB,IAAA,WACE6H,OAAO,CAAEA,CAAA,GAAMrE,WAAW,CAAC,UAAU,CAAE,CACvC8D,SAAS,eAAAhB,MAAA,CAAgB/C,QAAQ,GAAK,UAAU,CAAG,aAAa,CAAG,EAAE,CAAG,CACxEgE,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEF,OAAO,CAAE,UAAW,CAAE,CAAAxG,QAAA,CACrD,aAED,CAAQ,CAAC,cACTpB,IAAA,WACE6H,OAAO,CAAEA,CAAA,GAAMrE,WAAW,CAAC,MAAM,CAAE,CACnC8D,SAAS,eAAAhB,MAAA,CAAgB/C,QAAQ,GAAK,MAAM,CAAG,aAAa,CAAG,EAAE,CAAG,CACpEgE,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEF,OAAO,CAAE,UAAW,CAAE,CAAAxG,QAAA,CACrD,WAED,CAAQ,CAAC,EACN,CAAC,cACNlB,KAAA,WACE2H,OAAO,CAAEA,CAAA,GAAMzE,iBAAiB,CAAC,IAAI,CAAE,CACvCkE,SAAS,CAAC,wBAAwB,CAAAlG,QAAA,eAElCpB,IAAA,CAACX,QAAQ,EAACyH,IAAI,CAAE,EAAG,CAAE,CAAC,UACxB,EAAQ,CAAC,EACN,CAAC,EACH,CAAC,CAGL/C,UAAU,EAAIhB,WAAW,eACxB7C,KAAA,QAAKoH,SAAS,CAAC,gCAAgC,CAACC,KAAK,CAAE,CAAEK,OAAO,CAAE,iBAAiB,CAAEG,YAAY,CAAE,iBAAiB,CAAEC,UAAU,CAAE,mBAAmB,CAAEN,UAAU,CAAE,0BAA2B,CAAE,CAAAtG,QAAA,eAC9LlB,KAAA,QAAKqH,KAAK,CAAE,CAAEQ,YAAY,CAAE,iBAAkB,CAAE,CAAA3G,QAAA,eAC9CpB,IAAA,OAAIuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEG,UAAU,CAAE,KAAK,CAAEF,YAAY,CAAE,QAAS,CAAE,CAAA3G,QAAA,CAAC,qCAA8B,CAAI,CAAC,cAClHpB,IAAA,MAAGuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,MAAO,CAAE,CAAAe,QAAA,CAAC,mFAAiF,CAAG,CAAC,EACnI,CAAC,CAEL6C,cAAc,cACbjE,IAAA,MAAGuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,MAAO,CAAE,CAAAe,QAAA,CAAC,0BAAwB,CAAG,CAAC,CAC3E2C,UAAU,CAAChB,WAAW,CAAC,cACzB/C,IAAA,QAAKuH,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEU,mBAAmB,CAAE,sCAAsC,CAAET,GAAG,CAAE,iBAAkB,CAAE,CAAArG,QAAA,CAClH+G,MAAM,CAACC,OAAO,CAACrE,UAAU,CAAChB,WAAW,CAAC,CAAC,CAACsF,GAAG,CAACC,KAAA,EAA0C,IAAzC,CAACC,aAAa,CAAEC,IAAI,CAAgB,CAAAF,KAAA,CAChF,KAAM,CAAAG,KAAK,CAAGC,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,CAAGA,IAAI,CAAC3G,MAAM,CAAG,CAAC,CACnD,GAAI4G,KAAK,GAAK,CAAC,CAAE,MAAO,KAAI,CAE5B,KAAM,CAAAG,cAAsC,CAAG,CAC7C,WAAW,CAAE,cAAc,CAC3B,aAAa,CAAE,gBAAgB,CAC/B,kBAAkB,CAAE,sBAAsB,CAC1C,uBAAuB,CAAE,0BAA0B,CACnD,qBAAqB,CAAE,yBACzB,CAAC,CAED,mBACE1I,KAAA,QAAyBqH,KAAK,CAAE,CAAEK,OAAO,CAAE,SAAS,CAAEiB,MAAM,CAAE,iCAAiC,CAAElB,YAAY,CAAE,KAAK,CAAED,UAAU,CAAE,iBAAkB,CAAE,CAAAtG,QAAA,eACpJpB,IAAA,QAAKuH,KAAK,CAAE,CAAEU,UAAU,CAAE,KAAK,CAAEH,QAAQ,CAAE,QAAQ,CAAEC,YAAY,CAAE,QAAS,CAAE,CAAA3G,QAAA,CAC3EwH,cAAc,CAACL,aAAa,CAAC,EAAIA,aAAa,CAC5C,CAAC,cACNrI,KAAA,QAAKqH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEzH,KAAK,CAAE,SAAU,CAAE,CAAAe,QAAA,EACnDqH,KAAK,CAAC,WAAS,CAACA,KAAK,GAAK,CAAC,CAAG,GAAG,CAAG,EAAE,EACpC,CAAC,CACLC,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,EAAIA,IAAI,CAACtG,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAACmG,GAAG,CAAC,CAAChD,GAAQ,CAAEyD,GAAW,gBACjE5I,KAAA,QAAeqH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEzH,KAAK,CAAE,MAAM,CAAE0I,SAAS,CAAE,SAAS,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,YAAY,CAAE,UAAU,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAA9H,QAAA,EAAC,SACpJ,CAACiE,GAAG,CAACpE,IAAI,GADH6H,GAEL,CACN,CAAC,CACDL,KAAK,CAAG,CAAC,eAAIvI,KAAA,QAAKqH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEzH,KAAK,CAAE,MAAM,CAAE0I,SAAS,CAAE,SAAU,CAAE,CAAA3H,QAAA,EAAC,IAAE,CAACqH,KAAK,CAAG,CAAC,CAAC,OAAK,EAAK,CAAC,GAZxGF,aAaL,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,cAENvI,IAAA,MAAGuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,MAAO,CAAE,CAAAe,QAAA,CAAC,sDAAoD,CAAG,CACzG,EACE,CACN,CACA+B,cAAc,eACbjD,KAAA,QAAKoH,SAAS,CAAC,wBAAwB,CAAAlG,QAAA,eACrCpB,IAAA,UACEmJ,IAAI,CAAC,MAAM,CACXC,QAAQ,CAAEhC,oBAAqB,CAC/BE,SAAS,CAAC,SAAS,CACnB+B,MAAM,CAAC,4BAA4B,CACpC,CAAC,cACFrJ,IAAA,WAAQ6H,OAAO,CAAEA,CAAA,GAAMzE,iBAAiB,CAAC,KAAK,CAAE,CAACkE,SAAS,CAAC,0BAA0B,CAAAlG,QAAA,CAAC,QAEtF,CAAQ,CAAC,EACN,CACN,cAEDlB,KAAA,QAAKoH,SAAS,CAAC,aAAa,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,iBAAkB,CAAE,CAAArG,QAAA,eAE9EpB,IAAA,QAAKsH,SAAS,CAAC,kBAAkB,CAACC,KAAK,CAAE,CAAE+B,IAAI,CAAE,CAAC,CAAEC,QAAQ,CAAE,CAAE,CAAE,CAAAnI,QAAA,CAC/DiC,aAAa,CAACxB,MAAM,GAAK,CAAC,cACzB3B,KAAA,QAAKoH,SAAS,CAAC,wBAAwB,CAAAlG,QAAA,eACrCpB,IAAA,CAACZ,UAAU,EAAC0H,IAAI,CAAE,EAAG,CAAC0C,OAAO,CAAE,GAAI,CAAE,CAAC,cACtCxJ,IAAA,MAAGsH,SAAS,CAAC,wBAAwB,CAAAlG,QAAA,CAAC,0CAAwC,CAAG,CAAC,EAC/E,CAAC,CACJmC,QAAQ,GAAK,UAAU,cACzB,mBACAvD,IAAA,QAAKsH,SAAS,CAAC,sBAAsB,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEiC,aAAa,CAAE,QAAQ,CAAEhC,GAAG,CAAE,iBAAkB,CAAE,CAAArG,QAAA,CAC/G+G,MAAM,CAACC,OAAO,CAACjI,mBAAmB,CAAC,CAACkI,GAAG,CAACqB,KAAA,EAAuB,IAAtB,CAACC,MAAM,CAAEC,OAAO,CAAC,CAAAF,KAAA,CACzD,KAAM,CAAAlB,IAAI,CAAG5C,mBAAmB,CAAC+D,MAAM,CAAC,EAAI,EAAE,CAC9C,GAAInB,IAAI,CAAC3G,MAAM,GAAK,CAAC,CAAE,MAAO,KAAI,CAElC,KAAM,CAAAgI,UAAU,CAAG7G,eAAe,CAACiD,GAAG,CAAC0D,MAAM,CAAC,CAE9C,mBACEzJ,KAAA,QAAkBoH,SAAS,CAAC,6BAA6B,CAACC,KAAK,CAAE,CAAEK,OAAO,CAAE,iBAAiB,CAAEI,UAAU,cAAA1B,MAAA,CAAesD,OAAO,CAACvJ,KAAK,CAAG,CAAE,CAAAe,QAAA,eACxIlB,KAAA,QACEoH,SAAS,CAAC,iBAAiB,CAC3BO,OAAO,CAAEA,CAAA,GAAM/B,YAAY,CAAC6D,MAAM,CAAE,CACpCpC,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfsC,UAAU,CAAE,QAAQ,CACpBrC,GAAG,CAAE,iBAAiB,CACtBsC,MAAM,CAAE,SAAS,CACjBhC,YAAY,CAAE8B,UAAU,CAAG,iBAAiB,CAAG,CACjD,CAAE,CAAAzI,QAAA,eAEFpB,IAAA,SAAMuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAS,CAAE,CAAA1G,QAAA,CAAEwI,OAAO,CAACtJ,IAAI,CAAO,CAAC,cAC1DN,IAAA,SAAMuH,KAAK,CAAE,CAAEU,UAAU,CAAE,GAAG,CAAEqB,IAAI,CAAE,CAAC,CAAEjJ,KAAK,CAAE,qBAAsB,CAAE,CAAAe,QAAA,CAAEwI,OAAO,CAACxJ,KAAK,CAAO,CAAC,cAC/FJ,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEG,UAAU,CAAEkC,OAAO,CAACvJ,KAAK,CAAEA,KAAK,CAAE,OAAO,CAAEyH,QAAQ,CAAE,QAAS,CAAE,CAAA1G,QAAA,CAC9FoH,IAAI,CAAC3G,MAAM,CACR,CAAC,CACNgI,UAAU,cAAG7J,IAAA,CAACT,WAAW,GAAE,CAAC,cAAGS,IAAA,CAACV,aAAa,GAAE,CAAC,EAC9C,CAAC,CAELuK,UAAU,eACT7J,IAAA,QAAKsH,SAAS,CAAC,gBAAgB,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEiC,aAAa,CAAE,QAAQ,CAAEhC,GAAG,CAAE,KAAK,CAAEsB,SAAS,CAAE,iBAAkB,CAAE,CAAA3H,QAAA,CAC3HoH,IAAI,CAACH,GAAG,CAAC,CAAC/G,OAAO,CAAEwH,GAAG,GAAK,KAAAkB,mBAAA,CAC1B,KAAM,CAAAC,QAAQ,CAAG3I,OAAO,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC+D,GAAG,CAAC,CAAC,EAAIjE,OAAO,CACpD,KAAM,CAAA4I,OAAO,CAAG,EAAAF,mBAAA,CAAAC,QAAQ,CAACzI,KAAK,CAAC,GAAG,CAAC,CAAC+D,GAAG,CAAC,CAAC,UAAAyE,mBAAA,iBAAzBA,mBAAA,CAA2BrJ,WAAW,CAAC,CAAC,GAAI,EAAE,CAC9D,KAAM,CAAAwJ,UAAU,CAAG1G,YAAY,GAAKnC,OAAO,CAE3C,mBACEpB,KAAA,QAEE2H,OAAO,CAAEA,CAAA,GAAMnE,eAAe,CAACpC,OAAO,CAAE,CACxCgG,SAAS,cAAAhB,MAAA,CAAe6D,UAAU,CAAG,UAAU,CAAG,EAAE,CAAG,CACvD5C,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfsC,UAAU,CAAE,QAAQ,CACpBrC,GAAG,CAAE,iBAAiB,CACtBG,OAAO,CAAE,UAAU,CACnBF,UAAU,CAAEyC,UAAU,CAAG,yBAAyB,CAAG,wBAAwB,CAC7ExC,YAAY,CAAE,KAAK,CACnBoC,MAAM,CAAE,SAAS,CACjBK,UAAU,CAAE,eAAe,CAC3BvB,MAAM,CAAEsB,UAAU,CAAG,mCAAmC,CAAG,uBAC7D,CAAE,CAAA/I,QAAA,eAEFpB,IAAA,CAACP,MAAM,EAACqH,IAAI,CAAE,EAAG,CAACS,KAAK,CAAE,CAAElH,KAAK,CAAEuJ,OAAO,CAACvJ,KAAK,CAAEgK,UAAU,CAAE,CAAE,CAAE,CAAE,CAAC,cACpErK,IAAA,SAAMuH,KAAK,CAAE,CACXO,QAAQ,CAAE,QAAQ,CAClBzH,KAAK,CAAE,qBAAqB,CAC5B2I,QAAQ,CAAE,QAAQ,CAClBC,YAAY,CAAE,UAAU,CACxBC,UAAU,CAAE,QAAQ,CACpBI,IAAI,CAAE,CACR,CAAE,CAAAlI,QAAA,CACC6I,QAAQ,CACL,CAAC,cACPjK,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAC7BO,QAAQ,CAAE,SAAS,CACnBF,OAAO,CAAE,SAAS,CAClBF,UAAU,CAAEwC,OAAO,GAAK,KAAK,CAAG,SAAS,CAAGA,OAAO,GAAK,MAAM,CAAG,SAAS,CAAGA,OAAO,GAAK,MAAM,CAAG,SAAS,CAAG,SAAS,CACvH7J,KAAK,CAAE,OAAO,CACdsH,YAAY,CAAE,KAAK,CACnB2C,aAAa,CAAE,WACjB,CAAE,CAAAlJ,QAAA,CACC8I,OAAO,CACJ,CAAC,GAnCFpB,GAoCF,CAAC,CAEV,CAAC,CAAC,CACC,CACN,GArEOa,MAsEL,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,cAEN,eACA3J,IAAA,QAAKsH,SAAS,CAAC,2BAA2B,CAACC,KAAK,CAAE,CAAEK,OAAO,CAAE,iBAAkB,CAAE,CAAAxG,QAAA,CAC9EmJ,gBAAgB,CAAC5E,YAAY,CAACvE,QAAQ,CAAE,CAAC,CAAC,CACxC,CACN,CACE,CAAC,CAGLqC,YAAY,eACXvD,KAAA,QAAKoH,SAAS,CAAC,qBAAqB,CAACC,KAAK,CAAE,CAAEiD,KAAK,CAAE,OAAO,CAAEH,UAAU,CAAE,CAAE,CAAE,CAAAjJ,QAAA,eAC5ElB,KAAA,QAAKoH,SAAS,CAAC,wBAAwB,CAACC,KAAK,CAAE,CAAEK,OAAO,CAAE,iBAAkB,CAAE,CAAAxG,QAAA,eAC5EpB,IAAA,OAAIsH,SAAS,CAAC,uBAAuB,CAACC,KAAK,CAAE,CAAEQ,YAAY,CAAE,iBAAiB,CAAE0C,YAAY,CAAE,iCAAiC,CAAEC,aAAa,CAAE,iBAAkB,CAAE,CAAAtJ,QAAA,CAAC,cAErK,CAAI,CAAC,cACLlB,KAAA,QAAKoH,SAAS,CAAC,kBAAkB,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEiC,aAAa,CAAE,QAAQ,CAAEhC,GAAG,CAAE,iBAAkB,CAAE,CAAArG,QAAA,eAC5GlB,KAAA,QAAKoH,SAAS,CAAC,UAAU,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEiC,aAAa,CAAE,QAAQ,CAAEhC,GAAG,CAAE,KAAM,CAAE,CAAArG,QAAA,eACxFpB,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,sBAAsB,CAAEiK,aAAa,CAAE,WAAY,CAAE,CAAAlJ,QAAA,CAAC,WAAS,CAAM,CAAC,cAClIpB,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEzH,KAAK,CAAE,qBAAqB,CAAEsK,SAAS,CAAE,YAAa,CAAE,CAAAvJ,QAAA,CAC3GqC,YAAY,CAACjC,KAAK,CAAC,GAAG,CAAC,CAAC+D,GAAG,CAAC,CAAC,CAC1B,CAAC,EACJ,CAAC,CACL9B,YAAY,CAAC7C,QAAQ,CAAC,GAAG,CAAC,eACzBV,KAAA,QAAKoH,SAAS,CAAC,UAAU,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEiC,aAAa,CAAE,QAAQ,CAAEhC,GAAG,CAAE,KAAM,CAAE,CAAArG,QAAA,eACxFpB,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,sBAAsB,CAAEiK,aAAa,CAAE,WAAY,CAAE,CAAAlJ,QAAA,CAAC,MAAI,CAAM,CAAC,cAC7HpB,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEzH,KAAK,CAAE,uBAAwB,CAAE,CAAAe,QAAA,CAAEqC,YAAY,CAAO,CAAC,EAC1G,CACN,cACDvD,KAAA,QAAKoH,SAAS,CAAC,UAAU,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEiC,aAAa,CAAE,QAAQ,CAAEhC,GAAG,CAAE,KAAM,CAAE,CAAArG,QAAA,eACxFpB,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,sBAAsB,CAAEiK,aAAa,CAAE,WAAY,CAAE,CAAAlJ,QAAA,CAAC,UAAQ,CAAM,CAAC,cACjIpB,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAU,CAAE,CAAA1G,QAAA,CACpD,EAAAqB,qBAAA,CAAAtC,mBAAmB,CAACK,kBAAkB,CAACiD,YAAY,CAAC,CAAC,UAAAhB,qBAAA,iBAArDA,qBAAA,CAAuDrC,KAAK,GAAI,OAAO,CACpE,CAAC,EACJ,CAAC,cACNF,KAAA,QAAKoH,SAAS,CAAC,UAAU,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEiC,aAAa,CAAE,QAAQ,CAAEhC,GAAG,CAAE,KAAM,CAAE,CAAArG,QAAA,eACxFpB,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,sBAAsB,CAAEiK,aAAa,CAAE,WAAY,CAAE,CAAAlJ,QAAA,CAAC,QAAM,CAAM,CAAC,cAC/HpB,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAC7BO,QAAQ,CAAE,QAAQ,CAClBF,OAAO,CAAE,SAAS,CAClBF,UAAU,CAAEjE,YAAY,CAACmH,QAAQ,CAAC,MAAM,CAAC,CAAG,SAAS,CAAGnH,YAAY,CAACmH,QAAQ,CAAC,OAAO,CAAC,CAAG,SAAS,CAAG,SAAS,CAC9GvK,KAAK,CAAE,OAAO,CACdsH,YAAY,CAAE,KAAK,CACnB6C,KAAK,CAAE,aAAa,CACpBF,aAAa,CAAE,WACjB,CAAE,CAAAlJ,QAAA,CACCqC,YAAY,CAACjC,KAAK,CAAC,GAAG,CAAC,CAAC+D,GAAG,CAAC,CAAC,CAC1B,CAAC,EACJ,CAAC,cAGNrF,KAAA,QAAKoH,SAAS,CAAC,UAAU,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEiC,aAAa,CAAE,QAAQ,CAAEhC,GAAG,CAAE,KAAK,CAAEsB,SAAS,CAAE,iBAAkB,CAAE,CAAA3H,QAAA,eACtHpB,IAAA,SAAMsH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,sBAAsB,CAAEiK,aAAa,CAAE,WAAY,CAAE,CAAAlJ,QAAA,CAAC,SAAO,CAAM,CAAC,cAChIlB,KAAA,QAAKqH,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEsC,UAAU,CAAE,QAAQ,CAAErC,GAAG,CAAE,KAAM,CAAE,CAAArG,QAAA,eAChElB,KAAA,SAAMoH,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEG,UAAU,CAAE,SAAS,CAAErH,KAAK,CAAE,OAAO,CAAEyH,QAAQ,CAAE,QAAQ,CAAEF,OAAO,CAAE,SAAU,CAAE,CAAAxG,QAAA,EAAC,GAC/G,CAAC,EAAAsB,qBAAA,CAAAmB,eAAe,CAACJ,YAAY,CAAC,UAAAf,qBAAA,iBAA7BA,qBAAA,CAA+Bb,MAAM,GAAI,CAAC,EACxC,CAAC,CACN,CAAC,EAAAc,sBAAA,CAAAkB,eAAe,CAACJ,YAAY,CAAC,UAAAd,sBAAA,iBAA7BA,sBAAA,CAA+Bd,MAAM,GAAI,CAAC,EAAI,CAAC,eAC/C3B,KAAA,SAAMqH,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,uBAAwB,CAAE,CAAAe,QAAA,eAClEpB,IAAA,CAACJ,OAAO,EAACkH,IAAI,CAAE,EAAG,CAACS,KAAK,CAAE,CAAEsD,WAAW,CAAE,KAAM,CAAE,CAAE,CAAC,CACnDhH,eAAe,CAACJ,YAAY,CAAC,CAAC5B,MAAM,CAAC,WACxC,EAAM,CACP,EACE,CAAC,EACH,CAAC,cAGN3B,KAAA,QAAKqH,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,iBAAiB,CAAEsB,SAAS,CAAE,iBAAkB,CAAE,CAAA3H,QAAA,eACpFlB,KAAA,WACE2H,OAAO,CAAEA,CAAA,GAAMzB,kBAAkB,CAAC3C,YAAY,CAAE,CAChD6D,SAAS,CAAC,wBAAwB,CAClCC,KAAK,CAAE,CAAE+B,IAAI,CAAE,CAAC,CAAE9B,OAAO,CAAE,MAAM,CAAEsC,UAAU,CAAE,QAAQ,CAAEgB,cAAc,CAAE,QAAQ,CAAErD,GAAG,CAAE,KAAM,CAAE,CAAArG,QAAA,eAEhGpB,IAAA,CAACN,cAAc,EAACoH,IAAI,CAAE,EAAG,CAAE,CAAC,QAC9B,EAAQ,CAAC,cACT5G,KAAA,WACE2H,OAAO,CAAEA,CAAA,GAAMjE,mBAAmB,CAAC,IAAI,CAAE,CACzC0D,SAAS,CAAC,0BAA0B,CACpCC,KAAK,CAAE,CAAE+B,IAAI,CAAE,CAAC,CAAE9B,OAAO,CAAE,MAAM,CAAEsC,UAAU,CAAE,QAAQ,CAAEgB,cAAc,CAAE,QAAQ,CAAErD,GAAG,CAAE,KAAM,CAAE,CAAArG,QAAA,eAEhGpB,IAAA,CAACL,WAAW,EAACmH,IAAI,CAAE,EAAG,CAAE,CAAC,WAC3B,EAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,CAGLjD,eAAe,CAACJ,YAAY,CAAC,EAAII,eAAe,CAACJ,YAAY,CAAC,CAAC5B,MAAM,CAAG,CAAC,eACxE3B,KAAA,QAAKoH,SAAS,CAAC,wBAAwB,CAACC,KAAK,CAAE,CAAEK,OAAO,CAAE,iBAAiB,CAAEmB,SAAS,CAAE,iBAAkB,CAAE,CAAA3H,QAAA,eAC1GlB,KAAA,OAAIoH,SAAS,CAAC,uBAAuB,CAACC,KAAK,CAAE,CAAEQ,YAAY,CAAE,iBAAiB,CAAEP,OAAO,CAAE,MAAM,CAAEsC,UAAU,CAAE,QAAQ,CAAErC,GAAG,CAAE,KAAM,CAAE,CAAArG,QAAA,eAClIpB,IAAA,CAACJ,OAAO,EAACkH,IAAI,CAAE,EAAG,CAAE,CAAC,gBACvB,EAAI,CAAC,cACL9G,IAAA,QAAKuH,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEiC,aAAa,CAAE,QAAQ,CAAEhC,GAAG,CAAE,KAAK,CAAEsD,SAAS,CAAE,OAAO,CAAE/B,QAAQ,CAAE,MAAO,CAAE,CAAA5H,QAAA,CACxG,CAAC,GAAGyC,eAAe,CAACJ,YAAY,CAAC,CAAC,CAACuH,OAAO,CAAC,CAAC,CAAC3C,GAAG,CAAC,CAAC4C,GAAG,CAAEnC,GAAG,gBACzD5I,KAAA,QAEEqH,KAAK,CAAE,CACLK,OAAO,CAAE,KAAK,CACdF,UAAU,CAAEoB,GAAG,GAAK,CAAC,CAAG,yBAAyB,CAAG,wBAAwB,CAC5EnB,YAAY,CAAE,KAAK,CACnBK,UAAU,CAAEc,GAAG,GAAK,CAAC,CAAG,mBAAmB,CAAG,uBAChD,CAAE,CAAA1H,QAAA,eAEFlB,KAAA,QAAKqH,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEsC,UAAU,CAAE,QAAQ,CAAEgB,cAAc,CAAE,eAAe,CAAE/C,YAAY,CAAE,KAAM,CAAE,CAAA3G,QAAA,eAC1GlB,KAAA,SAAMqH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEG,UAAU,CAAE,GAAI,CAAE,CAAA7G,QAAA,EAAC,UAAQ,CAAC6J,GAAG,CAAC3F,OAAO,EAAO,CAAC,cACnFtF,IAAA,SAAMuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEzH,KAAK,CAAE,sBAAuB,CAAE,CAAAe,QAAA,CACjE6J,GAAG,CAACzF,UAAU,CAAC0F,kBAAkB,CAAC,CAAC,CAChC,CAAC,EACJ,CAAC,cACNhL,KAAA,MAAGqH,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,uBAAuB,CAAE0H,YAAY,CAAE,KAAM,CAAE,CAAA3G,QAAA,EAAC,MACjF,CAAC6J,GAAG,CAACvF,UAAU,EAClB,CAAC,CACHuF,GAAG,CAACpE,OAAO,EAAIoE,GAAG,CAACpE,OAAO,CAAChF,MAAM,CAAG,CAAC,eACpC7B,IAAA,QAAKuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEzH,KAAK,CAAE,sBAAuB,CAAE,CAAAe,QAAA,CAChE6J,GAAG,CAACpE,OAAO,CAACwB,GAAG,CAAC,CAAC8C,MAAM,CAAEC,CAAC,gBACzBlL,KAAA,QAAaqH,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEsC,UAAU,CAAE,YAAY,CAAErC,GAAG,CAAE,KAAK,CAAEsB,SAAS,CAAE,KAAM,CAAE,CAAA3H,QAAA,eAC9FpB,IAAA,CAACH,aAAa,EAACiH,IAAI,CAAE,EAAG,CAACS,KAAK,CAAE,CAAElH,KAAK,CAAE,SAAS,CAAE0I,SAAS,CAAE,KAAM,CAAE,CAAE,CAAC,cAC1E/I,IAAA,SAAAoB,QAAA,CAAO+J,MAAM,CAAO,CAAC,GAFbC,CAGL,CACN,CAAC,CACC,CACN,GA1BItC,GA2BF,CACN,CAAC,CACC,CAAC,EACH,CACN,EACE,CACN,EACE,CAAC,CAGLnF,gBAAgB,EAAIF,YAAY,eAC/BzD,IAAA,QACEuH,KAAK,CAAE,CACL8D,QAAQ,CAAE,OAAO,CACjBC,GAAG,CAAE,CAAC,CACNC,IAAI,CAAE,CAAC,CACPC,KAAK,CAAE,CAAC,CACRC,MAAM,CAAE,CAAC,CACT/D,UAAU,CAAE,iBAAiB,CAC7BF,OAAO,CAAE,MAAM,CACfsC,UAAU,CAAE,QAAQ,CACpBgB,cAAc,CAAE,QAAQ,CACxBY,MAAM,CAAE,IACV,CAAE,CACF7D,OAAO,CAAEA,CAAA,GAAMjE,mBAAmB,CAAC,KAAK,CAAE,CAAAxC,QAAA,cAE1ClB,KAAA,QACEoH,SAAS,CAAC,YAAY,CACtBC,KAAK,CAAE,CACLK,OAAO,CAAE,iBAAiB,CAC1B+D,QAAQ,CAAE,OAAO,CACjBnB,KAAK,CAAE,KAAK,CACZ9C,UAAU,CAAE,qBACd,CAAE,CACFG,OAAO,CAAErB,CAAC,EAAIA,CAAC,CAACoF,eAAe,CAAC,CAAE,CAAAxK,QAAA,eAElClB,KAAA,OAAIqH,KAAK,CAAE,CAAEQ,YAAY,CAAE,iBAAiB,CAAEP,OAAO,CAAE,MAAM,CAAEsC,UAAU,CAAE,QAAQ,CAAErC,GAAG,CAAE,KAAM,CAAE,CAAArG,QAAA,eAChGpB,IAAA,CAACL,WAAW,GAAE,CAAC,oBACjB,EAAI,CAAC,cACLO,KAAA,QAAKqH,KAAK,CAAE,CACVK,OAAO,CAAE,iBAAiB,CAC1BF,UAAU,CAAE,yBAAyB,CACrCC,YAAY,CAAE,KAAK,CACnBK,UAAU,CAAE,mBAAmB,CAC/BD,YAAY,CAAE,iBAChB,CAAE,CAAA3G,QAAA,eACAlB,KAAA,MAAGqH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEzH,KAAK,CAAE,qBAAqB,CAAE4H,UAAU,CAAE,GAAI,CAAE,CAAA7G,QAAA,EAAC,aACrE,CAACqC,YAAY,CAACjC,KAAK,CAAC,GAAG,CAAC,CAAC+D,GAAG,CAAC,CAAC,EACxC,CAAC,cACJrF,KAAA,MAAGqH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEzH,KAAK,CAAE,uBAAuB,CAAE0I,SAAS,CAAE,KAAM,CAAE,CAAA3H,QAAA,EAAC,oBACjE,CAAC,EAAAwB,sBAAA,CAAAiB,eAAe,CAACJ,YAAY,CAAC,UAAAb,sBAAA,iBAA7BA,sBAAA,CAA+Bf,MAAM,GAAI,CAAC,EAC5D,CAAC,EACD,CAAC,cACN7B,IAAA,MAAGuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEzH,KAAK,CAAE,uBAAuB,CAAE0H,YAAY,CAAE,iBAAkB,CAAE,CAAA3G,QAAA,CAAC,oGAEpG,CAAG,CAAC,cACJpB,IAAA,UACE6L,GAAG,CAAE1H,YAAa,CAClBgF,IAAI,CAAC,MAAM,CACXC,QAAQ,CAAE7C,qBAAsB,CAChC8C,MAAM,CAAC,kBAAkB,CACzB9B,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAC5B,CAAC,cACFtH,KAAA,QAAKqH,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,iBAAkB,CAAE,CAAArG,QAAA,eACtDlB,KAAA,WACEoH,SAAS,CAAC,iBAAiB,CAC3BO,OAAO,CAAEA,CAAA,QAAAiE,qBAAA,QAAAA,qBAAA,CAAM3H,YAAY,CAAC1C,OAAO,UAAAqK,qBAAA,iBAApBA,qBAAA,CAAsBC,KAAK,CAAC,CAAC,EAAC,CAC7CxE,KAAK,CAAE,CAAE+B,IAAI,CAAE,CAAE,CAAE,CAAAlI,QAAA,eAEnBpB,IAAA,CAACX,QAAQ,EAACyH,IAAI,CAAE,EAAG,CAAE,CAAC,mBACxB,EAAQ,CAAC,cACT9G,IAAA,WACEsH,SAAS,CAAC,mBAAmB,CAC7BO,OAAO,CAAEA,CAAA,GAAMjE,mBAAmB,CAAC,KAAK,CAAE,CAAAxC,QAAA,CAC3C,QAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,CAGR;AACA,QAAS,CAAAmJ,gBAAgBA,CAACyB,KAAmB,CAAEC,KAAa,CAAmB,CAC7E,MAAO,CAAAD,KAAK,CAAC3D,GAAG,CAAC,CAAC6D,IAAI,CAAEpD,GAAG,GAAK,CAC9B,GAAIoD,IAAI,CAAC/K,QAAQ,CAAE,CACjB,KAAM,CAAA0I,UAAU,CAAG7G,eAAe,CAACiD,GAAG,CAACiG,IAAI,CAAChL,IAAI,CAAC,CACjD,mBACEhB,KAAA,QAAeqH,KAAK,CAAE,CAAE4E,UAAU,CAAEF,KAAK,CAAG,EAAG,CAAE,CAAA7K,QAAA,eAC/ClB,KAAA,QACE2H,OAAO,CAAEA,CAAA,GAAM/B,YAAY,CAACoG,IAAI,CAAChL,IAAI,CAAE,CACvCqG,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfsC,UAAU,CAAE,QAAQ,CACpBrC,GAAG,CAAE,KAAK,CACVG,OAAO,CAAE,SAAS,CAClBmC,MAAM,CAAE,SAAS,CACjBpC,YAAY,CAAE,KAAK,CACnBD,UAAU,CAAE,wBACd,CAAE,CAAAtG,QAAA,EAEDyI,UAAU,cAAG7J,IAAA,CAACR,QAAQ,EAACsH,IAAI,CAAE,EAAG,CAACS,KAAK,CAAE,CAAElH,KAAK,CAAE,SAAU,CAAE,CAAE,CAAC,cAAGL,IAAA,CAACR,QAAQ,EAACsH,IAAI,CAAE,EAAG,CAACS,KAAK,CAAE,CAAElH,KAAK,CAAE,SAAU,CAAE,CAAE,CAAC,cACvHL,IAAA,SAAMuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,SAAS,CAAEG,UAAU,CAAE,GAAI,CAAE,CAAA7G,QAAA,CAAE8K,IAAI,CAACjL,IAAI,CAAO,CAAC,cACzEjB,IAAA,SAAMuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEzH,KAAK,CAAE,sBAAsB,CAAE8L,UAAU,CAAE,MAAO,CAAE,CAAA/K,QAAA,CACpF8K,IAAI,CAAC9K,QAAQ,CAACS,MAAM,CACjB,CAAC,EACJ,CAAC,CACLgI,UAAU,EAAIU,gBAAgB,CAAC2B,IAAI,CAAC9K,QAAQ,CAAE6K,KAAK,CAAG,CAAC,CAAC,GAnBjDnD,GAoBL,CAAC,CAEV,CAAC,IAAM,KAAAsD,oBAAA,CACL,KAAM,CAAAxC,OAAO,CAAGzJ,mBAAmB,CAAC+L,IAAI,CAAC9J,QAAQ,EAAI,OAAO,CAAC,CAC7D,KAAM,CAAA+H,UAAU,CAAG1G,YAAY,GAAKyI,IAAI,CAAChL,IAAI,CAC7C,KAAM,CAAAgJ,OAAO,CAAG,EAAAkC,oBAAA,CAAAF,IAAI,CAACjL,IAAI,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC+D,GAAG,CAAC,CAAC,UAAA6G,oBAAA,iBAA1BA,oBAAA,CAA4BzL,WAAW,CAAC,CAAC,GAAI,EAAE,CAE/D,mBACET,KAAA,QAEE2H,OAAO,CAAEA,CAAA,GAAMnE,eAAe,CAACwI,IAAI,CAAChL,IAAI,CAAE,CAC1CqG,KAAK,CAAE,CACL4E,UAAU,CAAEF,KAAK,CAAG,EAAE,CACtBzE,OAAO,CAAE,MAAM,CACfsC,UAAU,CAAE,QAAQ,CACpBrC,GAAG,CAAE,KAAK,CACVG,OAAO,CAAE,SAAS,CAClBmC,MAAM,CAAE,SAAS,CACjBpC,YAAY,CAAE,KAAK,CACnBD,UAAU,CAAEyC,UAAU,CAAG,yBAAyB,CAAG,aAAa,CAClEtB,MAAM,CAAEsB,UAAU,CAAG,mCAAmC,CAAG,uBAC7D,CAAE,CAAA/I,QAAA,eAEFpB,IAAA,CAACP,MAAM,EAACqH,IAAI,CAAE,EAAG,CAACS,KAAK,CAAE,CAAElH,KAAK,CAAEuJ,OAAO,CAACvJ,KAAM,CAAE,CAAE,CAAC,cACrDL,IAAA,SAAMuH,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEwB,IAAI,CAAE,CAAC,CAAEN,QAAQ,CAAE,QAAQ,CAAEC,YAAY,CAAE,UAAU,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAA9H,QAAA,CAC9G8K,IAAI,CAACjL,IAAI,CACN,CAAC,cACPjB,IAAA,SAAMuH,KAAK,CAAE,CACXO,QAAQ,CAAE,QAAQ,CAClBF,OAAO,CAAE,SAAS,CAClBF,UAAU,CAAEwC,OAAO,GAAK,KAAK,CAAG,SAAS,CAAGA,OAAO,GAAK,MAAM,CAAG,SAAS,CAAG,SAAS,CACtF7J,KAAK,CAAE,OAAO,CACdsH,YAAY,CAAE,KAAK,CACnB2C,aAAa,CAAE,WACjB,CAAE,CAAAlJ,QAAA,CACC8I,OAAO,CACJ,CAAC,GA3BFpB,GA4BF,CAAC,CAEV,CACF,CAAC,CAAC,CACJ,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}